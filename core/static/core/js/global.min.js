!function(m){"use strict";var o=Object.create(null),u=[];function d(){return performance&&performance.now&&performance.now()||Date.now&&Date.now()||(new Date).getTime()}function h(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function i(c){var u={"`":{set:"border:1px solid;border-radius:.3em;padding:.1em.2em",reset:""},"*":{set:"font-weight:bolder",reset:""},_:{set:"font-style:italic",reset:""}},d=[],p=0,m=c.shift(),h=/%([Oosc]|(?:[0-9.]+)?[dif])/g;return d.unshift(m.replace(/([`*_])((?:(?!\1)[^`*_])+)\1(?![`*_A-zА-яЁё])/g,function(e,t,a,n){var t=u[t],r=m.substring(p,n).match(h),i=r?r.length:0,r=a.match(h),s=r?r.length:0;if(p=n,0<i)for(var o=0;o<i;o+=1)d.push(c.shift());if(d.push(t.set),0<s)for(var l=0;l<s;l+=1)d.push(c.shift());return d.push(t.reset),"%c"+a+"%c"})),d.concat(c)}var a={pluginName:"depotProto",DEBUG:!!window.location.host.match(/(127\.0\.0\.1|localhost|\.local|\.designdepot\.ru)/i),MARKUP:!!window.location.pathname.match(/\.html/i),BUILD:"2022-03-01T11:30:32",$WINDOW:m(window),$DOCUMENT:m(document),$HTML:m(document.documentElement),$BODY:m(document.body),$HTMLBODY:m([document.documentElement,document.body]),KEYS:{ARROW_DOWN:40,ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,ENTER:13,ESCAPE:27,SPACE:32,TAB:9},LANGUAGE:document.documentElement.lang||"ru",defaults:{processingClassName:"is-processing",selectedClassName:"is-selected",visibleClassName:"is-visible",activeClassName:"is-active",getElementsOutside:!1,dictionary:{month:{0:{full:{ru:"Январь",en:"January"},plural:{ru:"Января",en:"January"},short:{ru:"Янв",en:"Jan"}},1:{full:{ru:"Февраль",en:"February"},plural:{ru:"Февраля",en:"February"},short:{ru:"Фев",en:"Feb"}},2:{full:{ru:"Март",en:"March"},plural:{ru:"Марта",en:"March"},short:{ru:"Мар",en:"Mar"}},3:{full:{ru:"Апрель",en:"April"},plural:{ru:"Апреля",en:"April"},short:{ru:"Апр",en:"Apr"}},4:{full:{ru:"Май",en:"May"},plural:{ru:"Мая",en:"May"},short:{ru:"Май",en:"May"}},5:{full:{ru:"Июнь",en:"June"},plural:{ru:"Июня",en:"June"},short:{ru:"Июн",en:"June"}},6:{full:{ru:"Июль",en:"July"},plural:{ru:"Июля",en:"July"},short:{ru:"Июл",en:"July"}},7:{full:{ru:"Август",en:"August"},plural:{ru:"Августа",en:"August"},short:{ru:"Авг",en:"Aug"}},8:{full:{ru:"Сентябрь",en:"September"},plural:{ru:"Сентября",en:"September"},short:{ru:"Сен",en:"Sept"}},9:{full:{ru:"Октябрь",en:"October"},plural:{ru:"Октября",en:"October"},short:{ru:"Окт",en:"Oct"}},10:{full:{ru:"Ноябрь",en:"November"},plural:{ru:"Ноября",en:"November"},short:{ru:"Ноя",en:"Nov"}},11:{full:{ru:"Декабрь",en:"December"},plural:{ru:"Декабря",en:"December"},short:{ru:"Дек",en:"Dec"}}},weekday:{0:{full:{ru:"Воскресенье",en:"Sunday"},short:{ru:"Вс",en:"Su"}},1:{full:{ru:"Понедельник",en:"Monday"},short:{ru:"Пн",en:"Mo"}},2:{full:{ru:"Вторник",en:"Tuesday"},short:{ru:"Вт",en:"Tu"}},3:{full:{ru:"Среда",en:"Wednesday"},short:{ru:"Ср",en:"We"}},4:{full:{ru:"Четверг",en:"Thursday"},short:{ru:"Чт",en:"Th"}},5:{full:{ru:"Пятница",en:"Friday"},short:{ru:"Пт",en:"Fr"}},6:{full:{ru:"Суббота",en:"Saturday"},short:{ru:"Сб",en:"Sa"}}}},debounce:300,extend:null,mixins:[],beforeInit:null,onInit:null},clamp:function(e,t,a){return Math.max(e,Math.min(t,a))},getNameSpace:function(){return this.format(".${pluginName}-${hash}",this)},cleanObject:function(){var e=Array.prototype.slice.call(arguments).map(function(e){var a;return"array"===h(e)&&(a={},m.each(e,function(e,t){a[e]=t}),e=a),e}),t=Object.create(null);return e.length?m.extend.apply(m,[!0,t].concat(e)):t},getInitialState:function(){return this.cleanObject()},getType:h,now:d,prefersReducedMotion:function(){var e=!1;return window.matchMedia?window.matchMedia("(prefers-reduced-motion: reduce)").matches:e},error:function(t,e){var a=Object.create({message:void 0,name:void 0,description:void 0,number:void 0,filename:void 0,lineNumber:void 0,columnNumber:void 0,stack:void 0}),n=h(t),n=("error"===n?m.each(a,function(e){void 0!==t[e]&&(a[e]=t[e])}):"object"===n?a=m.extend(a,t):"string"===n&&(a.message=t,a.name="Error"),{error:(n=a,JSON.parse(JSON.stringify(n).replace(/"(pass[^"]*)":"([^"]*)"/gi,'"$1":"***"').replace(/(pass[^/=]*)=([^&]*)/gi,"$1=***"))),telemetry:((n=Object.create(null)).build=this&&this.BUILD||void 0,n.timestamp=d(),n.scrollPositionX=window.scrollX,n.scrollPositionY=window.scrollY,navigator&&(n.userAgent=navigator.userAgent,n.cookieEnabled=navigator.cookieEnabled,navigator.connection&&(n.connectionSaveData=navigator.connection.saveData,n.connectionDownlink=navigator.connection.downlink,n.connectionEffectiveType=navigator.connection.effectiveType)),screen&&(n.screenWidth=screen.width,n.screenHeight=screen.height,n.screenOrientation=screen.orientation.type),n)}),r=["%c♦ %c%s:%c "+this.format("#{if name}${name}: #{endif}#{if number}${number} - #{endif}${message}",a),"color:#"+this.hash,"color:tomato",this.pluginName,""];return Function.prototype.apply.call(console.error,console,i(r.concat(n))),a},warn:function(){var e=this.pluginName,t=Array.prototype.slice.call(arguments);if(t.length){var a=t.shift();if("string"==typeof a&&0===a.indexOf("--debug")){if(!this.DEBUG)return;a=t.shift()}return"string"==typeof a&&0===a.indexOf("::")&&(e+=a,a=t.shift()),e="string"==typeof a?["%c♦ %c%s:%c "+a,"color:#"+this.hash,"color:orange",e,""]:["%c♦ %c%s:%c","color:#"+this.hash,"color:orange",e,"",a],Function.prototype.apply.call(console.warn,console,i(e.concat(t)))}},info:function(){var e=this.pluginName,t=Array.prototype.slice.call(arguments);if(t.length){var a=t.shift();if("string"==typeof a&&0===a.indexOf("--debug")){if(!this.DEBUG)return;a=t.shift()}return"string"==typeof a&&0===a.indexOf("::")&&(e+=a,a=t.shift()),e="string"==typeof a?["%c♦ %c%s:%c "+a,"color:#"+this.hash,"color:cyan",e,""]:["%c♦ %c%s:%c","color:#"+this.hash,"color:cyan",e,"",a],Function.prototype.apply.call(console.info,console,i(e.concat(t)))}},log:function(){var e=Array.prototype.slice.call(arguments),t=this.pluginName;if(e.length){var a=e.shift();if("string"==typeof a&&0===a.indexOf("--debug")){if(!this.DEBUG)return!1;a=e.shift()}return"string"==typeof a&&0===a.indexOf("::")&&(t+=a,a=e.shift()),t="string"==typeof a?["%c♦ %c%s:%c "+a,"color:#"+this.hash,"color:dodgerblue;",t,""]:["%c♦ %c%s:%c","color:#"+this.hash,"color:dodgerblue;",t,"",a],Function.prototype.apply.call(console.log,console,i(t.concat(e)))}},hashify:function(e,t){var a=e;return t=t?12<t?12:t:6,"string"==typeof(e="function"==typeof(e="object"==typeof e||"string"==typeof e&&!e.length?JSON.stringify(e):e)?e.toString():e)?(a=0,e.split("").forEach(function(e,t){e=e.charCodeAt(0);a+=(e+t)/(2378757+e)})):void 0===e&&(a=Math.random()),((Math.abs(a)+1)/(2378757+a)).toString(16).substr(-1*t)},format:function(e,t){var n,a,i,d=this;function p(e,i){var s={hash:d.hashify,plural:function(e,t,a,n){e=e.toString();return e.match(/([^1]|^)(1)$/)?t:e.match(/([^1]|^)([234])$/)||void 0===n?void 0===a?"":a:n},digit:function(e,t){var t=(void 0===t?e.toString():e.toFixed(t)).split("."),a=t[0],t=t[1];return void 0!==e?a.split("").reverse().join("").split(/([0-9]{3})/).join(" ").split("").reverse().join("").trim()+(t?","+t:""):e},ft:function(e){return void 0!==e?e.toString().replace(/^[—]\s/gi,"&mdash;&nbsp;").replace(/\s[—]\s/gi,"&nbsp;&mdash;&thinsp;").replace(/[—]/gi,"&mdash;").replace(/([0-9])[x]+([0-9])/gi,"$1&times;$2").replace(/(?=[>])"([^"<>]+)"/gi,"&laquo;$1&raquo;").replace(/(^|\s|[^a-zа-яё0-9_-])([0-9]+|[a-zа-яё]{1,3})\s/gi,"$1$2&nbsp;"):e},fixed:function(e,t,a){var n=e;return isNaN(e)||(n=parseFloat(e).toFixed(t||1),a&&(n=parseFloat(n))),n},round:function(e){return isNaN(e)?e:Math.round(e)},zero:function(e){var t=e.toString().split("."),a=parseInt(t[0],10),t=t[1]?"."+t[1]:"";return!isNaN(e)&&a<10?("0"+a).substr(-2)+t:e},split:function(e,t){var a=e;return"string"===h(e)?e.split(t||","):a},join:function(e,t){var a=e;return"array"===h(e)?e.join(t):a},extra:function(e){var a=[];return"object"===h(e)&&m.each(e,function(e,t){a.push(e+'="'+t+'"')}),a.join(" ")},default:function(e,t){var a=e;if(!e)if(t){e=p(t,i);if(e)a=e;else try{a=JSON.parse(t)}catch(e){a=t}}else a="";return a},substr:function(e,t,a){var n=e;return"string"===h(e)?e.substr(t,a):n},length:function(e){var t,a=h(e);return"array"===a?t=e.length:"object"===a?t=Object.keys(e).length:"string"!==a&&"number"!==a||(t=e.toString().length),t},lower:function(e){return void 0!==e?e.toString().toLowerCase():e},upper:function(e){return void 0!==e?e.toString().toUpperCase():e},date:function(e,t){var a,n=e;return e&&(a="date"===h(e)?e:new Date(e),e=t?t.replace(/([a-z])/gi,"${$1}"):"${Y}-${m}-${d}",n=d.format(e,{d:function(){return p("d|zero",{d:a.getDate()})},j:function(){return a.getDate()},D:function(){return d.getText("weekday."+a.getDay()+".short")},l:function(){return d.getText("weekday."+a.getDay()+".full")},w:function(){return a.getDay()},N:function(){var e=a.getDay();return 0===e?7:e+1},m:function(){return p("m|zero",{m:a.getMonth()+1})},n:function(){return a.getMonth()+1},M:function(){return d.getText("month."+a.getMonth()+".short")},E:function(){return d.getText("month."+a.getMonth()+".plural")},F:function(){return d.getText("month."+a.getMonth()+".full")},y:function(){return a.getFullYear().toString().substr(-2)},Y:function(){return a.getFullYear()},H:function(){return p("H|zero",{H:a.getHours()})},i:function(){return p("i|zero",{i:a.getMinutes()})},s:function(){return p("s|zero",{s:a.getSeconds()})}})),n},json:function(t){var a;try{a=JSON.stringify(t)}catch(e){a=t}return a},escapeHTML:function(e){var t={"&":"&amp","<":"&lt",">":"&gt",'"':"&quot","'":"&#39"},a=/[&<>"']/g;return void 0!==e&&a.test(e)?e.replace(a,function(e){return t[e]}):e}},a=d.cleanObject(i),e=e.toString().split("|"),t=e.shift(),o=a[t];return-1!==t.indexOf(".")&&(m.each(t.split("."),function(e,t){return!!(a=a[t.trim()])}),o=a),void 0!==(o="function"===h(o)?o.call(d):o)&&e.length&&m.each(e,function(e,t){var a,n,r=t.match(/^([^(]+)(?:\(([^)]+)\))?$/,"g");r?(a=r[1],r=r[2]?r[2].split(/[, ]+/):[],(n=(n="function"===h(s[a])&&s[a])||"object"!==h(i.filters)||"function"!==h(i.filters[a])?n:i.filters[a])?o=n.apply(null,Array.prototype.concat(o,r)):d.warn("Шаблонный фильтр _%s_ не найден",a)):d.warn("Ошибка в написании фильтра _|%s_",t)}),o}if(e)return a=i=function(l){var e=/#{if\s+([!]*)([^}!]+)}((((?!#{endif}).)*)#{else})?(((?!#{endif}).)*(((?!#{if\s+[^}]+}).)*))#{endif}/gm,t=i;function a(e,t,a,n,r,i,s){var o="",a=p(a,l);return!n&&(!t&&a||t&&!a)?o=d.format(s,l):n&&(!t&&a||t&&!a)?o=d.format(r,l):n&&(!t&&!a||t&&a)&&(o=d.format(s,l)),void 0===o?e:o}if(l)for(var n=t,r=!0;t.match(e)&&r;)r=n!==(t=t.replace(e,a))&&(n=t,!0);return t}((i=function(c){var e=/#{for\s+([^}!]+)}(((?:(?!#{(?:empty|endfor)}).)*)#{empty})?((?:(?!#{endfor}).)*(?:((?!#{for\s+[^}!]+}).)*))#{endfor}/gm,t=i;function u(a,e,n,r){var i,s=("array"===h(e)?e:Object.keys(e)).length,o=a;return s&&(o="",i=0,m.each(e,function(e,t){e=m.extend(!0,d.cleanObject(r),{loop:{key:e,isFirst:0===i,isLast:i===s-1,index0:i,index:i+1,item:t,isOnly:1===s}});e[n]=t,o+=d.format(a,e),i+=1})),o}function a(e,t,a,n,r){var i,s,t=t.match(/^(.*)\s+in\s+(.*)$/i),o=t[1],l=t[2],t=l&&-1!==l.indexOf("..")?function(){var e=[],t=l&&l.match(/^([0-9-]+)\.\.([0-9-]+)$/);if(t){var a=parseInt(t[1],10),n=parseInt(t[2],10);if(a<=n)for(var r=a;r<=n;r+=1)e.push(r);else if(n<a)for(var i=a;n<=i;--i)e.push(i)}return e}():p(l,c);return void 0===t||"array"!==h(t)&&"object"!==h(t)||(5e3<(s=("array"===h(t)?t:Object.keys(t)).length)&&d.warn("::format","Операция может занять много времени, вы не можете повлиять на это"),!a&&s?i=u(r,t,o,c):a&&s?i=u(n,t,o,c):a&&!s&&(i=u(r,t,o,c))),void 0===i?e:i}if(c)for(var n=t,r=!0;t.match(e)&&r;)r=n!==(t=t.replace(e,a))&&(n=t,!0);return t}((i=function(a){var e=/\${([^|$}]+(?:(?:\|)[^$}]*?)?)}/g,t=i;if(a)for(var n=t,r=!0;"string"===h(t)&&t.match(e)&&r;)r=n!==(t=t.replace(e,function(e,t){t=p(t,a);return void 0===t?e:t}))&&(n=t,!0);return t}((i=e,t||{})),t||{})),t||{})),a=(n=t||{})?i.replace(/_{([^|_}]+(?:(?:\|)[^_}]*?)?)}/g,function(e,t){var t=t.split("|"),a=t[0],t=t[1],a=d.getText(a,t,n.dictionary);return void 0===a?e:a}):a,a;d.error({action:"DepotProto.format",data:{template:e,context:t},name:"ArgumentError",message:"переменная _template_ не получена"})},translate:function(e){if(e)return function n(r,i){var e;return(r&&"object"===h(r)||"array"===h(r))&&((e=r[i])?r=e:"object"!==h(r)&&"array"!==h(r)||m.each(r,function(e,t){var a;(t&&"object"===h(t)||"array"===h(t))&&(a=t[i],r[e]=a||n(t,i))})),r}(e,this.LANGUAGE);this.error({action:"DepotProto.translate",data:{dictionary:e},name:"ArgumentError",message:"переменная _dictionary_ не получена"})},getText:function(e,a,n){var r,t,i=this;if(e)return r="",t=e.split("."),n=n||i.params.dictionary,m.each(t,function(e,t){if(r){if(!(r=r[t])){if(!a)return!1;r=i.getText(a,void 0,n)}}else r=n[t]}),r;i.error({action:"DepotProto.getText",data:{path:e,fallbackPath:a,dictionary:n},name:"ArgumentError",message:"переменная _path_ не получена"})},addEventNS:function(e,t){var a,n=this,r=[];switch(h(e)){case"array":a=e;break;case"object":a=[],m.each(e,function(e,t){a.push(t)});break;default:a=e&&"all"!==e?e.split(/[ ]+/):[""]}return m.each(a,function(){r.push(this+(n.eventNameSpace||"")+(t||""))}),r.join(" ")},throttle:function(e,t,a){var n,r,i,s=this;"function"==typeof e&&(a=t,t=e,e=s.hashify(t)),"function"==typeof t?(void 0===s.cache.throttleTimers&&(s.cache.throttleTimers=Object.create(null)),void 0===a&&(a=s.params.debounce),n=s.now(),i=function(){delete s.cache.throttleTimers[e]},void 0===(r=s.cache.throttleTimers[e])?(s.cache.throttleTimers[e]={timestamp:n,timeout:s.delay(i,a)},s.call(t,e)):n-r.timestamp>=a?(s.cancelDelay(r.timeout),delete s.cache.throttleTimers[e],s.call(t,e)):(s.cancelDelay(r.timeout),s.cache.throttleTimers[e].timeout=s.delay(i,a))):s.warn("::throttle","Функция обратного вызова для `%s` не передана",e)},debounce:function(e,t,a){var n=this;"function"==typeof e&&(a=t,t=e,e=n.hashify(t)),"function"==typeof t?(void 0===n.cache.debounceTimers&&(n.cache.debounceTimers=Object.create(null)),void 0===n.cache.debounceTimers[e]?n.call(t,e):n.cancelDelay(n.cache.debounceTimers[e]),void 0===a&&(a=n.params.debounce),n.cache.debounceTimers[e]=n.delay(function(){delete n.cache.debounceTimers[e]},a)):n.warn("::debounce","Функция обратного вызова для `%s` не передана",e)},delay:function(e,n,t){var r=this,i=r.hashify();function s(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return setTimeout(function(){e.call(window,i)})}).call(window,e),i}return n=n||0,o[i]={callback:e,onCancel:t},s(function e(t){var a;return o[i]&&(o[i].start||(o[i].start=t),a=t-o[i].start,n<=a?(r.call(o[i].callback,t),delete o[i]):s(e)),i})},getDelays:function(){return m.extend(!0,{},o)},cancelDelay:function(e){var t=o[e];return t&&"function"==typeof t.onCancel&&this.call(t.onCancel),t&&delete o[e]},animate:function(r,i,s){s=s||{done:null,cancel:null,easing:"linear"};var o=this,l=o.now(),c=0,e={linear:function(e){return e}},u={delayId:0,cancel:function(){o.cancelDelay(this.delayId),o.call(s.cancel)}},d="string"===h(s.easing)?e[s.easing]||e.linear:"function"===h(s.easing)?s.easing:e.linear;return u.delayId=o.delay(function e(t){var t=t-l,a=o.call(d,o.clamp(0,t/r,1)),n=a-c;o.call(i,n,a,r,t),(c=a)<1?u.delayId=o.delay(e):o.call(s.done)}),u},wait:function(e,t,a,n){var r=this,i=[10,100,200,500],s=100;function o(){r.params.debug&&r.info("отмена %c%s%c","color: deepskyblue;",e,""),r.state.waitingTimeouts[e]&&(r.state.waitingPhase[e]=r.state.waitingDelaysQuantity[e],r.state.waitingBusyBy&&r.state.waitingBusyBy===e&&(r.state.waitingBusyBy=""),r.cancelDelay(r.state.waitingTimeouts[e]))}function l(e){var t=e.waitingID,a=e.condition,n=e.callback;r.state.waitingBusyBy===t||e.parallel?(r.params.debug&&r.info("проверка %c%s%c","color: deepskyblue;",t,""),a.call(r,o)?(r.params.debug&&(a=parseFloat((d()-e.timestamp).toFixed(4)),r.info("%c%s%c готов%c (%dms)","color: deepskyblue;",t,"color: lime;","",a)),delete r.state.waitingTimes[t],delete r.state.waitingPhase[t],delete r.state.waitingDelaysQuantity[t],r.state.waitingBusyBy&&r.state.waitingBusyBy===t&&(r.state.waitingBusyBy=""),r.call(n),e.parallel||c()):-1===r.state.waitingPhase[t]?r.call(o):r.state.waitingPhase[t]<r.state.waitingDelaysQuantity[t]?(r.state.waitingTimes[t]<s?r.state.waitingTimes[t]+=1:(r.state.waitingTimes[t]=1,r.state.waitingPhase[t]+=1),r.state.waitingTimeouts[t]=r.delay(function(){l(e)},i[r.state.waitingPhase[t]])):(r.state.waitingBusyBy&&r.state.waitingBusyBy===t&&(r.state.waitingBusyBy=""),r.warn("Превышено время ожидания для %c%s%c","color: deepskyblue;",t,""))):r.delay(function(){l(e)})}function c(e){!r.state.waitingBusyBy&&r.state.waitingQueue.length&&(e=r.state.waitingQueue.shift(),r.state.waitingBusyBy=e.waitingID,l(e))}return"function"==typeof t&&"function"==typeof a?(r.params.debug&&r.info("ожидание %c%s%c...","color: deepskyblue;",e,""),void 0===r.state.waitingTimeouts&&(r.state.waitingTimeouts=Object.create(null),r.state.waitingDelaysQuantity=r.state.waitingDelaysQuantity||{},r.state.waitingTimes=r.state.waitingTimes||{},r.state.waitingPhase=r.state.waitingPhase||{},r.state.waitingQueue=r.state.waitingQueue||[],(!r.state.waitingBusyBy||r.state.waitingBusyBy&&r.state.waitingBusyBy===e)&&(r.state.waitingBusyBy="")),"array"===h(i)?r.state.waitingDelaysQuantity[e]=i.length:r.state.waitingDelaysQuantity[e]=1,void 0===r.state.waitingTimes[e]&&(r.state.waitingTimes[e]=0,r.state.waitingPhase[e]=0,t={timestamp:d(),waitingID:e,condition:t,callback:a,parallel:n,abort:o},n?(r.params.debug&&r.info("%c%s%c вне очереди","color: deepskyblue;",e,""),l(t)):(r.params.debug&&r.info("%c%s%c добавлен в очередь","color: deepskyblue;",e,""),r.state.waitingQueue=r.state.waitingQueue.concat(t),c()))):r.warn("wait(%c%s%c, condition, callback): condition || callback не являются функцией","color: deepskyblue;",e,""),{next:c,abort:o}},addScripts:function(e,n,t){var r=this,i=[],a=t||3e5;function s(e){e=i.indexOf(e.src);return-1!==e&&i.splice(e,1),Array.prototype.concat(i)}function o(e){var a=!0;return Array.prototype.concat(e.exports).forEach(function(e){var t=window;e.split(".").forEach(function(e){return t=t[e],a=void 0!==t&&a})}),a}function l(e){var t;o(e)?(i=s(e),0===(i="array"===h(e.plugins)&&e.plugins.length?c(e.plugins):i).length&&r.call(n,null)):r.now()-e.timestamp<a?r.delay(function(){l(e)}):(i=s(e),t=r.error({action:"DepotProto.addScripts",message:"Превышено время ожидания загрузки",name:"TimeoutError",data:e}),r.call(n,t))}function c(e){return Array.prototype.concat(e).forEach(function(a){var e,t;o(a)||-1!==u.indexOf(a.src)?(a.timestamp=r.now(),l(a)):(i=i.concat(a.src),e=a.src,(t=document.createElement("script")).onerror=function(e){i=s(a);var t=r.error({action:"DepotProto.addScripts",message:"Ошибка загрузки",name:"NetworkError",data:a});r.call(n,t)},t.onload=function(){r.delay(function(){a.timestamp=r.now(),l(a)})},u.push(e),t.src=e,document.head.appendChild(t))}),Array.prototype.concat(i)}return e?i=c(e):r.call(n,null),r},getElements:function(e,n){var r=this,i=/^([a-z0-9]+)Selector$/i;return void 0===n&&(n=r.params.getElementsOutside),m.each(e||r.params,function(e,t){var a;"string"==typeof t&&(e=e.toString().match(i))&&(!(a=r.$container.find(t)).length&&n&&(a=m(t)),"container"!==e[1]&&(r["$"+e[1]]=a))}),r},getSelector:function(e){var t,a,n;switch(h(e)){case"string":n="."+e;break;case"undefined":t=this.$container;break;case"object":t=e;break;default:t=m(e)}return n=!n&&t&&t.length?(a=t.attr("class").match(/(?:^|\s)(js-[a-z-]+)/))?"."+a[1]:"":n},on:function(e){var t=this;if(void 0===e)return t;var a=Array.prototype.slice.call(arguments,1);return e="array"===h(e)?t.addEventNS(e[0],e[1]):t.addEventNS(e),a.unshift(e),m.fn.on.apply(t.$container,a),t},one:function(e){var t=this;if(void 0===e)return t;var a=Array.prototype.slice.call(arguments,1);return e="array"===h(e)?t.addEventNS(e[0],e[1]):t.addEventNS(e),a.unshift(e),m.fn.one.apply(t.$container,a),t},off:function(e){var t=this;if(void 0===e)return t;var a=Array.prototype.slice.call(arguments,1);return e="array"===h(e)?t.addEventNS(e[0],e[1]):t.addEventNS(e),a.unshift(e),m.fn.off.apply(t.$container,a),t},bind:function(e){var t,a,n;return void 0!==e&&("string"===h(arguments[1])?(a=arguments[1],n=arguments[2],(t=Array.prototype.slice.call(arguments,3)).unshift(this.addEventNS(e,a))):(n=arguments[1],(t=Array.prototype.slice.call(arguments,2)).unshift(this.addEventNS(e))),m.fn.on.apply(n,t)),this},unbind:function(e){var t,a,n;return"string"===h(arguments[1])?(a=arguments[1],n=arguments[2],(t=Array.prototype.slice.call(arguments,3)).unshift(this.addEventNS(e,a))):(n=arguments[1],(t=Array.prototype.slice.call(arguments,2)).unshift(this.addEventNS(e))),m.fn.off.apply(n,t),this},trigger:function(e){var t=Array.prototype.slice.call(arguments,1);return 1===t.length&&(t=t[0]),this.$container.trigger(e,t),this},triggerTo:function(e,t){var a,n,r;switch(h(e)){case"string":r=this.$container.find(e);break;case"object":r=e;break;default:r=m(e)}return"string"===h(arguments[2])?(n=arguments[2],(a=Array.prototype.slice.call(arguments,3)).unshift(this.addEventNS(t,n))):(a=Array.prototype.slice.call(arguments,2)).unshift(this.addEventNS(t)),r.length&&m.fn.trigger.apply(r,a),this},call:function(e){var t=Array.prototype.slice.call(arguments);if(t.shift(),"function"==typeof e)return e.apply(this,t)},matchMedia:function(e,a){var n=this,r=null;return m.each(e,function(e,t){e=window.matchMedia(e);e.onchange=function(e){n.call(a,e.matches?t:null)},e.matches&&(r=t)}),r},filterItems:function(e,s,o){var l,c=this;return e.each(function(e,t){var n=!1,r=!1,a=m(t),i=a.data();m.each(s,function(e,t){if(void 0!==e&&void 0!==t){e=e.toString(),"all"===(t=t.toString())&&(n=!0);e=i[e];if(!e)return!1;var e=e.toString().split(/[ ,]+/),a=t.split(/[ ,]+/);m.each(e,function(e,t){if(void 0!==t&&(t=t.toString(),-1!==a.indexOf(t)))return!(r=!0)})}else r=!1}),(r||n)&&(l?l.add(t):l=m(t)),c.call(o,a,r,n)}),l},applyMixins:function(){var a=this;return a.call(a.params.preInit),(a=a.params.extend&&m.isPlainObject(a.params.extend)?m.extend(!0,a,a.params.extend):a).params.mixins&&a.params.mixins.length&&m.each(a.params.mixins,function(e,t){m.isPlainObject(t)?a=m.extend(!0,a,t):a.error({action:"DepotProto.applyMixins",data:{mixin:t},name:"TypeError",message:"Миксин должен быть объектом"})}),a},proxyCallback:function(t,a){var n=this;return function(){var e;return"function"==typeof t&&(e=t.apply(n,arguments)),a.apply(e,arguments)}},hasPlugin:function(e){var t=m[e]||m.fn[e];return t||this.warn("Необходим плагин *%s*",e),t},sandbox:function(e,r,i){var s=this;return("object"==typeof e?e:m(e||document)).each(function(e,t){function a(){return this}a.prototype=m.extend(!0,{},s);var n=new a;n.pluginName+="::"+(i||"sandbox"),m.data(t,n.pluginName)||m.data(t,n.pluginName,n._init.call(n,t,r))}),r},prefixed:function(n){var r=Object.create(null);return window.Modernizr?m.each(n,function(e){var t=n[e],a=Modernizr.prefixedCSS(e),e=(!1===a&&(a=e),Modernizr.prefixedCSSValue(a,t));r[a]=e=!1===e?t:e}):(r=n,this.warn("Необходим *Modernizr* с функциями _prefixedCSS()_ и _prefixedCSSValue()_\n","https://modernizr.com/download?prefixedcss-prefixedcssvalue")),r},unbindEvents:function(){var e=this;return e.off(""),e.unbind("",e.$WINDOW),e.unbind("",e.$DOCUMENT),e.unbind("",e.$HTMLBODY),e},_init:function(e,t){var a=this;return a.hash=a.hashify(),a.eventNameSpace=a.getNameSpace(),a.params=a.translate(m.extend(!0,Object.create(null),a.defaults,t)),a.applyMixins(),a.$container=m(e),a.container=e,a.call(a.swapContainer),a.getElements(),a.state=a.getInitialState(),a.cache=Object.create(null),a.one("destroy",function(){a.unbindEvents()}),a.call(a.params.beforeInit),a.call(a.bindEvents),a.call(a.init),a}};m.depotProto=a,m.depotSandbox=function(){var t=Array.prototype.slice.call(arguments);return a.sandbox.apply(a,t),function(e){t[0]=e||t[0],a.sandbox.apply(a,t)}}}(jQuery),function(r){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=r.extend(!0,{},r.depotProto,{pluginName:"depotFigure",defaults:{sourceSelector:".js-figure-source",captionSelector:".js-figure-caption",zoomSelector:".js-figure-zoom",playSelector:".js-figure-play",excludeSelector:".is-cloned",dataCollectionParam:"collection",dataTypeParam:"type"},getItemId:function(e){return e.data("id")},getItemType:function(e){return e.data("type")||e.attr("itemprop")},getItemSrc:function(e){return e.data("original")||e.attr("src")},getItemUrl:function(e){return e.data("url")||""},getItemThumb:function(e){return e.data("thumb")||e.data("poster")||e.attr("src")},getItemCaption:function(e){return e&&e.length?e.text().trim():void 0},getCollectionId:function(e){return e.data(this.params.dataCollectionParam)},getItemData:function(e){var t=this,a=(e=void 0===e?t.$container:e).find(t.params.sourceSelector),n=t.getItemId(e),r=t.getCollectionId(e);return{id:n,type:t.getItemType(e),src:t.getItemSrc(a),thumb:t.getItemThumb(a),url:t.getItemUrl(a),caption:t.getItemCaption(e.find(t.params.captionSelector)),collection:r}},getCollectionData:function(){var a=this,n={item:a.getItemData(),collection:{items:[]}},e=a.$container.data(a.params.dataCollectionParam);return"string"==typeof e&&e.length?(e=r(a.format('[data-${param}="${value}"]',{param:a.params.dataCollectionParam,value:e}))).length&&e.filter(function(e,t){return 0===r(t).closest(a.params.excludeSelector).length}).each(function(e,t){n.collection.items.push(a.getItemData(r(t)))}):n.collection.items.push(a.state.item),n},stop:function(){var e,t=this;return"video"===t.state.item.type?"function"==typeof(e=t.$source.get(0)).pause&&e.pause():"youtube"===t.state.item.type&&t.$iframe&&t.$iframe.length&&t.$iframe.remove(),t.$play.prop("disabled",!1),t},play:function(){var a=this;return a.$play.prop("disabled",!0),"video"===a.state.item.type?a.$source.get(0).play():"iframe"===a.state.item.type?(a.$iframe=r(a.format('<iframe class="figure__iframe" src="${src}" allowfullscreen></iframe>',{src:a.state.item.url})),a.$source.parent().append(a.$iframe)):"pdf"===a.state.item.type?a.addScripts({src:"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.7/pdfobject.min.js",exports:"PDFObject"},function(e){e||(e=a.format("iframe-${id|hash}",{id:a.state.item.url}),a.$iframe=r(a.format('<div class="figure__iframe" id="${id}"></div>',{id:e})),a.$source.parent().append(a.$iframe),window.PDFObject.embed(a.state.item.url,"#"+e,{pdfOpenParams:{view:"FitV",pagemode:"thumbs"}}))}):"youtube"===a.state.item.type&&a.addScripts({src:"https://www.youtube.com/iframe_api",exports:"YT"},function(e){var t;e||(t=a.format("iframe-${id|hash}",{id:a.state.item.url}),a.$iframe=r(a.format('<div class="figure__iframe" id="${id}"></div>',{id:t})),a.$source.parent().append(a.$iframe),window.YT.ready(function(){var e=new window.YT.Player(t,{width:a.$iframe.width(),height:a.$iframe.height(),videoId:a.state.item.url,playerVars:{controls:1,enablejsapi:1,fs:0,hl:a.LANGUAGE,origin:window.location.origin,color:"white",rel:0,showinfo:0,autoplay:1}});a.$iframe=r(e.f)}))}),a},zoom:function(){return this.$WINDOW.trigger("screen:show",this.getCollectionData()),this},bindEvents:function(){var a=this;return a.on("click",a.params.zoomSelector,function(e){e.preventDefault(),a.stop(),a.zoom()}),a.on("click",a.params.playSelector,function(e){e.preventDefault(),a.play()}),a.on("figure:stop",a.stop.bind(a)),a.on("figure:getCollection",function(e,t){a.call(t.callback,a.getCollectionData())}),a},getInitialState:function(){return{item:this.getItemData()}},init:function(){var e=this;return r.depotHash.has(e.state.item.id)&&e.zoom(),e.call(e.params.onInit),e}}),r.fn.depotFigure=function(a){return this.each(function(e,t){r.data(this,"depotFigure",new n(t,a))})},r.depotProto.$DOCUMENT.on("figure:added",function(e,t){e=r(e.target),e=e.is(".js-figure")?e:e.find(".js-figure");e&&e.length&&e.depotFigure(t)})}(jQuery),function(d){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=d.extend(!0,{},d.depotProto,{pluginName:"depotForm",defaults:{fields:'input:not([type="hidden"]), textarea, select',fieldSelector:".js-form-field",fieldErrorSelector:".js-form-field-error",submitButtonSelector:'.js-form-submit, [type="submit"]',busyClassName:"is-busy",validClassName:"is-valid",invalidClassName:"is-invalid",processingClassName:"is-processing",preventBadSubmit:!0,preventRepeatedSubmit:!0,ajax:!1,dataType:"json",processData:null,validation:!0,validatorClassNamePrefix:"is-",forceValidation:!1,changeDebounce:100,requestHeaders:[],validators:{"is-required":{test:function(e,t,a){return a&&Boolean(a.length)},messagePath:"errors.required"},"is-string":{test:function(e,t,a){return!(a&&Boolean(a.length))||/^([a-zа-яё.'" -]{1,256})$/gi.test(a)},messagePath:"errors.value"},"is-number":{test:function(e,t,a){return!(a&&a.length)||/^([0-9-]{1,256})$/gi.test(t)},messagePath:"errors.number"},"is-email":{test:function(e,t,a){return!(a&&Boolean(a.length))||/^[a-z0-9](['_.-a-z0-9]+)[@]([a-z0-9]+)([.-a-z0-9]+)+[.]([a-z]{2,})$/i.test(t)},messagePath:"errors.email"},"is-tel":{test:function(e,t,a){var n=a&&Boolean(a.length),r=a.replace(/[^0-9+]/g,""),i=""!==a.replace(/[0-9() +-]/g,""),a=/([() +-]+)\1+/g.test(a),r=/^[+]?[0-9]{7,}$/i.test(r);return!n||!i&&!a&&r},messagePath:"errors.tel"},"is-date":{test:function(e,t,a){var n,r,i,s,o=a&&Boolean(a.length),l=!1,a=a.replace(/[^0-9.]/g,"").match(/^([0-3][0-9])\.([0-1][0-9])\.([1-2][09][0-9]{2})$/);return a&&4===a.length&&(n=parseInt(a[1],10),r=parseInt(a[2],10)-1,a=parseInt(a[3],10),isNaN(n)||isNaN(r)||isNaN(a)||(i=new Date(a,r,n)||!1,s=(new Date).getFullYear(),l=n===i.getDate()&&r===i.getMonth()&&a===i.getFullYear()&&s-100<=a&&a<=s+100)),!o||Boolean(l)},messagePath:"errors.value"},"is-message":{test:function(e,t,a){var n=a&&Boolean(a.length),r=e.minLength&&-1!==e.minLength?e.minLength:0,e=e.maxLength&&-1!==e.maxLength?e.maxLength:"",r=new RegExp("^(.{"+r+","+e+"})","g");return!n||r.test(a)},messagePath:"errors.message"},"is-password":{test:function(e,t,a){return!(a&&Boolean(a.length))||/^([^а-яё ])/gi.test(a)},messagePath:"errors.password"},"is-minlength":{test:function(e,t,a){return!(a&&Boolean(a.length))||a.length>=e.minLength},messagePath:"errors.minlength"},"is-maxlength":{test:function(e,t,a){return!(a&&Boolean(a.length))||a.length<=e.maxLength},messagePath:"errors.maxlength"},"is-same":{test:function(a,e,t){var n,r=this,i=!1,t=t&&Boolean(t.length),s=a.className.match(/is-same:([^ ]+)/),s=s?s[0]:void 0;return s&&(r.state.same[s]||(r.state.same[s]={elements:[],name:void 0,isSame:!0}),n=!1,d.each(r.state.same[s].elements,function(e,t){return!(n=a.name===t.name||n)}),n||(r.state.same[s].elements.push(a),void 0===r.state.same[s].name&&(r.state.same[s].name=r.state.same[s].elements[0].name,r.state.same[s].value=r.state.same[s].elements[0].value)),1<r.state.same[s].elements.length&&(r.state.same[s].name===a.name?(r.state.same[s].value=e,i=!0,d.each(r.state.same[s].elements,function(e,t){e&&r.validateField(t)})):i=r.state.same[s].value===e)),!t||i},messagePath:"errors.match"},"is-external":{test:function(e,t,a){a=a&&Boolean(a.length),e=d.data(e,"external")||[],t=t.replace(/[^a-zа-яё0-9]/gi,"");return!a||-1===e.indexOf(t)}},"is-select":{test:function(e,t,a){return""!==a&&"0"!==a&&"-1"!==a},messagePath:"errors.choose"},"is-checked":{test:function(e,t,a){this.state.choose=this.state.choose||{};e=this.$container.find(this.params.fields).filter('[name="'+e.name+'"]');return e&&!!e.filter(":checked").length},messagePath:"errors.choose"}},formatters:{"to-date":{patterns:["([0-9]{2})","([0-9]{2})"],separators:[".","."],permitted:"0-9."},"to-time":{patterns:["([0-9]{2})"],separators:[":"],permitted:"0-9:"},"to-card":{patterns:["([0-9]{4})","([0-9]{5})","([0-9]{4})"],separators:[" "," "],permitted:"0-9 "},"to-tel":{patterns:["([+]?)","([0-9])","([0-9]{3})","([0-9]{3})","([0-9]{2})"],separators:[""," (",") ","-","-"],permitted:"0-9+)(-"}},modifiers:{"to-upper":function(e,t,a,n,r){var e=e.key,i=t.maxLength&&t.value.length>=t.maxLength;!e.length||i&&t.selectionStart===t.selectionEnd?(t.selectionStart=a,t.selectionEnd=a):(t.value=(n+e+r).toUpperCase(),t.selectionStart=a+1,t.selectionEnd=t.selectionStart)},"to-number":function(e,t,a,n,r){var i=/[^0-9-.,]/g,e=e.key.replace(i,""),s=-1!==t.maxLength&&t.value.length>=t.maxLength;!e.length||s&&t.selectionStart===t.selectionEnd?(t.selectionStart=a,t.selectionEnd=a):(t.value=(n+e+r).replace(i,""),t.selectionStart=a+1,t.selectionEnd=t.selectionStart)},"to-phone":function(e,t,a,n,r){var i=/[^0-9( )+-]/g,e=e.key.replace(i,""),s=t.maxLength&&t.value.length>=t.maxLength;!e.length||s&&t.selectionStart===t.selectionEnd?(t.selectionStart=a,t.selectionEnd=a):(t.value=(n+e+r).replace(i,""),t.selectionStart=a+1,t.selectionEnd=t.selectionStart)}},dictionary:{errors:{required:{ru:"Обязательное поле",en:"Required"},value:{ru:"Недопустимое значение",en:"Invalid value"},email:{ru:"Некорректный e-mail",en:"Invalid e-mail"},number:{ru:"Только числа",en:"Only numbers"},tel:{ru:"Некорректный формат номера",en:"Incorrect number format"},message:{ru:"Сообщение слишком короткое",en:"The message is too short"},password:{ru:"Пароль должен содержать латинские буквы, символы и цифры",en:"Password must contain latin letters, symbols and numbers"},minlength:{ru:"Минимум ${minLength} ${minLength|plural(символ,символа,символов)}",en:"Minimum length ${minLength} ${minLength|plural(character,characters)}"},maxlength:{ru:"Максимум ${maxLength} ${maxLength|plural(символ,символа,символов)}",en:"Maximum length ${maxLength} ${minLength|plural(character,characters)}"},choose:{ru:"Необходимо выбрать",en:"Choose"},match:{ru:"Поля должны совпадать",en:"Fields must match"}}},onChangeSubmit:!1,onChange:null,onSubmit:null,onReset:null,onError:null,onProgress:null,onValidation:null},normalizeFieldName:function(e){return e&&e.replace(/[\[\]]/gi,"-")||e},filterArray:function(a,n){var r=[];return Array.prototype.filter?r=a.filter(n):d.each(a,function(e,t){n(t,e,a)&&r.push(t)}),r},startProcessingForm:function(){return this.state.processing=!0,this.$container.addClass(this.params.processingClassName),this},stopProcessingForm:function(){return this.state.processing=!1,this.$container.removeClass(this.params.processingClassName),this},storeFields:function(){var a=this;return a.state.fields=a.state.fields||{},a.$container.find(a.params.fields).each(function(e,t){a.addField(t)}),a},addField:function(e){var t=this;return e&&e.id&&t.state.fields&&!t.state.fields[e.id]&&(t.state.fields[e.id]={canValidate:!1,changed:t.isChangedField(e),busy:t.isBusyField(e)}),t},removeField:function(e){var t=this;return e&&e.id&&(t.state.fields&&!t.state.fields[e.id]&&delete t.state.fields[e.id],t.state.errors&&!t.state.errors[e.id]&&delete t.state.errors[e.id]),t},switchValidation:function(e){e=this.state.fields[e.id];return e&&e.changed&&(e.canValidate=!0),this},checkFieldChanges:function(e){var t=this.state.fields[e.id];return t&&!t.changed&&this.isChangedField(e)&&(t.changed=!0,this.removeExternalErrorFor(e)),this},busyField:function(e){var t=this,a=t.state.fields[e.id];return a&&(a.busy=!0,t.delay(function(){!0===a.busy&&d(e).closest(t.params.fieldSelector).addClass(t.params.busyClassName)})),t},freeField:function(e,t){var a=this,n=a.state.fields[e.id];return n&&(n.busy=!1,a.delay(function(){!1!==n.busy&&!t||d(e).closest(a.params.fieldSelector).removeClass(a.params.busyClassName)})),a},isMultipart:function(){return this.container.enctype&&"multipart/form-data"===this.container.enctype.toLocaleLowerCase()},isBusyField:function(e){var t=-1!==e.type.indexOf("select");return!t&&0<e.value.length||t&&"0"!==e.value&&"-1"!==e.value&&""!==e.value},isChangedField:function(e){var t=-1!==e.type.indexOf("select"),a="checkbox"===e.type,n="radio"===e.type;return t?"0"!==e.value&&"-1"!==e.value&&""!==e.value:a||n?e.checked!==e.defaultChecked:e.value!==e.defaultValue},updateBusynessField:function(e){return this.isBusyField(e)?this.busyField(e):this.freeField(e),this},updateBusynessForm:function(){var e=this;return e.$container.find(e.params.fields).each(function(){e.updateBusynessField(this)}),e},validateForm:function(){var e=this;return e.$container.find(e.params.fields).each(function(){e.validateField(this)}),e.checkSubmit(),e.call(e.params.onValidation,e.state.errors),e},validateField:function(i){var e,t,a,s=this,o=!0;return s.params.validators&&(e=d(i),(a=((i.required?s.params.validatorClassNamePrefix+"required ":"")+i.className).trim().split(/[ ]+/)||[]).length&&(e=e.closest(s.params.fieldSelector),t=s.state.fields[i.id],a=s.filterArray(a,function(e){return 0===e.indexOf(s.params.validatorClassNamePrefix)}),d.each(a,function(e,t){var a,n,r=s.params.validators[t.replace(/:(.*)/,"")];r?"function"==typeof r.test&&(n=(a=i.value).trim(),s.call(r.test,i,a,n)||i.disabled?s.removeErrorFor(i,t):(o=!1,s.setErrorFor(i,t,r.message,r.messagePath))):0===t.indexOf(s.params.validatorClassNamePrefix+"external-")&&(a=d.data(i,"external")||[]).length&&(n=d.data(i,"message"),r=i.value.replace(/[^a-zа-яё0-9]/gi,""),-1===a.indexOf(r)||i.disabled?s.removeExternalErrorFor(i):(o=!1,s.setExternalErrorFor(i,n)))}),o&&t&&t.canValidate&&t.changed&&t.busy?e.addClass(s.params.validClassName):e.removeClass(s.params.validClassName))),o},setExternalErrorFor:function(e,t){var a,n,r;return e&&(a=this.params.validatorClassNamePrefix+"external-"+this.normalizeFieldName(e.name),n=d.data(e,"external")||[],r=e.value.replace(/[^a-zа-яё0-9]/gi,""),-1===n.indexOf(r)&&(n.push(r),d.data(e,"external",n),d.data(e,"message",t)),this.setErrorFor(e,a,t)),this},removeExternalErrorFor:function(e){var t=this.params.validatorClassNamePrefix+"external-"+this.normalizeFieldName(e.name);return this.removeErrorFor(e,t),this},setErrorFor:function(e,t,a,n){var r,i,s=this;return e&&(i=(r=e.id).split(":")[0],s.state.errors[i]||(s.state.errors[i]=[]),-1===s.state.errors[i].indexOf(t)&&s.state.errors[i].push(t),s.state.fields[r]&&s.state.fields[r].canValidate||s.state.submitted?(s.showErrorMessage(e,t,a,n),void 0!==e.willValidate&&!0===e.willValidate&&e.setCustomValidity(s.getValidatorMessage(a,n,e))):s.hideErrorMessage(e,t,a,n)),s},removeErrorFor:function(e,t){var a,n,r=this;return e&&(a=e.id.split(":")[0],r.state.errors[a]&&(n=t+"-"+r.normalizeFieldName(e.name),t=r.state.errors[a].indexOf(t),n=r.state.errors[a].indexOf(n),-1!==t&&r.state.errors[a].splice(t,1),-1!==n&&r.state.errors[a].splice(n,1),r.state.errors[a].length||(r.removeErrorsFor(e),void 0!==e.willValidate&&e.setCustomValidity("")))),r},removeErrorsFor:function(e,t){var a;return e&&(a=e.id.split(":")[0],(this.state.errors[a]||t)&&(delete this.state.errors[a],this.hideErrorMessage(e))),this},showErrorMessage:function(r,e,i,s){var o=this;return r&&o.delay(function(){var e,t=d(r),a=t.closest(o.params.fieldSelector),n=a.find(o.params.fieldErrorSelector);a.removeClass(o.params.validClassName),a.addClass(o.params.invalidClassName),o.triggerTo(t,"invalid"),n&&n.length&&(e=o.getValidatorMessage(i,s,r))&&(a.attr("title",e),n.text(e),n.aria("hidden","false")),t.aria("invalid","true"),t.aria("describedby",n.attr("id"))}),o},hideErrorMessage:function(n){var r=this;return n&&r.delay(function(){var e=d(n),t=e.closest(r.params.fieldSelector),a=t.find(r.params.fieldErrorSelector);t.removeClass(r.params.invalidClassName),t.removeAttr("title"),e.aria("invalid","false"),e.removeAria("describedby"),a.text(""),a.aria("hidden","true")}),r},calculateErrors:function(){var a=0;return d.each(this.state.errors,function(e,t){t&&t.length&&(a+=t.length)}),a},getValidatorMessage:function(e,t,a){var n=e;return!e||!e.length&&t?this.format(this.getText(t),a):n},checkSubmit:function(){var e=this;return e.params.preventBadSubmit&&(e.calculateErrors()?(e.state.submitDisabled=!0,e.$submitButton.prop("disabled",!0)):(e.state.submitDisabled=!1,e.$submitButton.prop("disabled",!1))),e},getSelectionRange:function(e,t){var a,n,r=e.type,i=0,s=0;return-1!==["text","search","url","tel","email","password"].indexOf(r)&&(s="number"==typeof e.selectionStart?(i=e.selectionStart,e.selectionEnd):(r=document.selection.createRange(),a=e.createTextRange(),n=e.createTextRange(),e=e.value.length,a.moveToBookmark(r.getBookmark()),n.collapse(!1),-1<a.compareEndPoints("StartToEnd",n)?i=e:(i=-a.moveStart("character",-e),-a.moveEnd("character",-e)))),t?{begin:i,end:s}:i},setSelection:function(e,t){"function"==typeof e.setSelectionRange&&-1!==["text","search","URL","tel","password"].indexOf(e.type)?(e.focus(),e.setSelectionRange(t.begin,t.end)):"function"==typeof e.createTextRange&&((e=e.createTextRange()).collapse(!0),e.moveEnd("character",t.begin),e.moveStart("character",t.end),e.select())},getCursorPosition:function(e){return this.getSelectionRange(e,!1)},setCursorPosition:function(e,t){return this.setSelection(e,{begin:t,end:t})},maskField:function(r,i){var s,o=this;return!o.params.formatters||r.ctrlKey||r.shiftKey||r.metaKey||r.altKey||-1!==[8,9,16,35,36,37,38,39,40,46].indexOf(r.which)||i.className&&i.className.length&&(s=i.className.split(" "),d.each(o.params.formatters,function(e,t){var a,n;return-1!==s.indexOf(e)&&t&&t.patterns&&t.separators&&(r.which&&(n=(a=o.getCursorPosition(i))===i.value.length),o.formatField(i,t.patterns,t.separators,t.permitted),r.which&&(n?o.setCursorPosition(i,i.value.length):o.setCursorPosition(i,a))),!0})),o},formatField:function(n,r,i,e){var s,o=this,t=n.value,a="",l=(d.each(i.join("").split(""),function(e,t){-1===a.indexOf(t)&&(a+=t)}),a=a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),t.replace(new RegExp("["+a+"]","ig"),"")),c=(e&&(l=l.replace(new RegExp("[^"+e+"]","ig"),"")),""),u="$1";d.each(r,function(e){var t=r[e]||"",a=i[e]||"",t=(c+=t,new RegExp(c,"i"));t.test(l)&&(s=l.replace(t,u+a),n.value!==s&&(n.value=s,o.triggerTo(n,"masked"))),u+=a+"$"+(e+2)})},modifyField:function(r,i){var s=this;return s.params.modifiers&&!r.ctrlKey&&!r.metaKey&&r.key&&1===r.key.length&&d.each(s.params.modifiers,function(e,t){var a,n;return i.className&&i.className.length&&-1!==i.className.split(" ").indexOf(e)&&t&&"function"==typeof t&&(r.preventDefault(),e=Math.min(i.selectionStart,i.selectionEnd),a=i.value.substr(0,i.selectionStart),n=i.value.substr(i.selectionEnd,i.value.length),s.call(t,r,i,e,a,n)),!0}),s},deleteFormData:function(){return delete this.state.formData},getFormData:function(e){var t=this,a=t.call(t.params.processData);return a||(t.isMultipart()?(a=new FormData(t.container),e&&(a=d.depotParse(a,{reverse:!0}))):a=t.$container.serialize()),a},submit:function(e){var n,r=this;return r.state.processing||(r.state.submitted=!0,r.startProcessingForm(),r.params.validation&&(r.state.validation=!0,r.validateForm()),r.params.validation&&r.calculateErrors()?(e&&"function"==typeof e.preventDefault&&e.preventDefault(),r.stopProcessingForm()):"function"==typeof r.params.onSubmit?(n=r.getFormData(),r.params.preventRepeatedSubmit&&r.state.formData===n?(r.params.ajax&&e&&"function"==typeof e.preventDefault&&e.preventDefault(),r.stopProcessingForm(),r.call(r.params.onSubmit,r.state.response)):(r.state.formData=n,r.params.ajax?(e&&"function"==typeof e.preventDefault&&e.preventDefault(),d.ajax(d.extend(!0,r.isMultipart()?{processData:!1,contentType:!1}:{},{url:r.$container.attr("action")||"",type:r.$container.attr("method")||"GET",data:n,dataType:r.params.dataType,cache:r.params.cache,xhr:function(){var e=d.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){r.call(r.params.onProgress,e)},!0),e},beforeSend:function(t){r.params.requestHeaders.length&&r.params.requestHeaders.forEach(function(e){t.setRequestHeader(e.name,e.value)})},success:function(e,t,a){r.stopProcessingForm(),r.state.response=e,r.call(r.params.onSubmit,e,t,a)},error:function(e,t,a){r.stopProcessingForm(),r.deleteFormData(),r.call(r.params.onError,e,t,a),r.error({action:"DepotForm.submit",data:{url:r.container.action||"",type:r.container.method||"GET",data:n},name:t,number:e.status,message:a})}}))):(r.call(r.params.onSubmit,e),r.stopProcessingForm()))):r.nativeSubmit()),r},reset:function(e){var t=this;return e&&e.preventDefault(),t.$container.find(t.params.fields).each(function(e,t){d(t).trigger("reset")}),t.state=t.getInitialState(),t.delay(function(){t.storeFields(),t.validateForm()},0),e&&"object"==typeof e&&"reset"===e.type&&t.call(t.params.onReset,e),t},resetField:function(e){var a=this,t=d(e);return t.is("select")?t.find("option").each(function(e,t){a.delay(function(){t.selected=t.defaultSelected})}):t.is('[type="radio"]')||t.is('[type="checkbox"]')?e.checked=e.defaultChecked:e.value=e.defaultValue,a.state.fields[e.id]={canValidate:!1,changed:a.isChangedField(e),busy:a.isBusyField(e)},a},clearField:function(e){var t=d(e);return t.is("select")?t.find("option").each(function(e,t){t.selected=0===e,t.defaultSelected=!1}):t.is('[type="radio"]')||t.is('[type="checkbox"]')?(e.checked=!1,e.defaultChecked=!1):(e.value="",e.defaultValue=""),this},update:function(){return this.updateBusynessForm(),this.validateForm(),this},bindEvents:function(){var n=this;return n.nativeSubmit=n.container.submit.bind(n.container),n.nativeReset=n.container.reset.bind(n.container),n.container.submit=n.submit.bind(n),n.container.reset=n.reset.bind(n),n.on("focusout",n.params.fields,function(){var e=this,t=e.id;n.throttle(["focusout",t].join("-"),function(){n.switchValidation(e),n.params.validation&&n.validateField(e)})}),n.on("keypress",n.params.fields,function(e){n.modifyField(e,this)}),n.on("keyup",n.params.fields,function(e){var t=this,a=t.id;n.throttle([e.type,a].join("-"),function(){n.maskField(e,t)},n.params.changeDebounce)}),n.on("change input keyup invalid update",n.params.fields,function(e){var t=this,a=t.id;n.throttle([e.type,a].join("-"),function(){n.updateBusynessField(t),n.checkFieldChanges(t),n.params.validation&&(n.validateField(t),n.checkSubmit())},n.params.changeDebounce),n.throttle(["onChange",a].join("-"),function(){n.call(n.params.onChange,e,t)}),n.params.onChangeSubmit&&n.submit()}),n.on("submit",function(e){n.state.processing?e.preventDefault():n.submit(e)}),n.on("reset",n.params.fields,function(e){var t=e.target;e.stopPropagation(),n.freeField(t,!0),n.removeErrorsFor(t,!0),n.resetField(t),n.validateField(t),n.checkSubmit()}),n.on("clear",n.params.fields,function(e){var t=e.target;e.stopPropagation(),n.freeField(t,!0),n.removeErrorsFor(t,!0),n.clearField(t),n.validateField(t)}),n.on("reset",function(e){n.reset(e)}),n.on("error",function(e){n.call(n.params.onError,e.data.error)}),n.$container.on("form:update",function(){n.throttle("form:update",function(){n.update()})}),n},getInitialState:function(){var e=Array.prototype.concat(this.params.requestHeaders||[]);return{fields:{},errors:{},same:{},submitted:!1,submitDisabled:!1,validation:this.params.forceValidation,requestHeaders:e}},init:function(){var e=this;return e.storeFields(),e.$submitButton.prop("disabled",Boolean(e.params.preventBadSubmit)),e.$container.prop("novalidate",Boolean(e.params.validation)),e.updateBusynessForm(),e.validateForm(),e.call(e.params.onInit),e}}),d.fn.depotForm=function(a){return this.each(function(e,t){d.data(t,"depotForm",new n(t,a))})}}(jQuery),function(i){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=i.extend(!0,{},i.depotProto,{pluginName:"depotGallery",defaults:{viewportSelector:".js-gallery-viewport",listSelector:".js-gallery-list",itemsSelector:".js-gallery-item",navigationSelector:".js-gallery-navigation",clonedClassName:"is-cloned",transitionClassName:"is-transition",slowTransitionClassName:"is-slow-transition",startFrom:0,swipe:!0,swipeThreshold:30,loop:!0,beforeChange:null,onChange:null,onTransitionEnd:null},getInitialState:function(){var r=[];return this.$items.each(function(e,t){var a=i(t),n=i(t).data()||{};a.attr("data-index",e+1),r.push(i.extend(!0,n,{index:e+1,item:t,caption:a.text().trim()}))}),{items:r,$current:null,current:null,currentDOMIndex:0,currentRealIndex:1,direction:0,isTransition:!1,itemsQuantity:this.$items.length,preventClick:!1,transitionDelay:null}},onTransitionEnd:function(){var e,t=this,a=(t.cancelDelay(t.state.transitionDelay),Math.abs(t.state.direction));return t.$list.removeClass(t.params.transitionClassName),t.$list.removeClass(t.params.slowTransitionClassName),t.state.isTransition=!1,t.state.preventClick=!1,t.state.$current.attr("tabindex","0"),0<t.state.direction?(e=t.$items.slice(0,t.state.direction),t.$list.append(e),t.state.currentDOMIndex-=a,t.$items=t.$list.find(t.params.itemsSelector),t.moveListTo(t.$list,t.state.$current,t.state,!0)):t.state.direction<0&&(e=t.$items.slice(t.state.direction),t.$list.prepend(e),t.state.currentDOMIndex+=a,t.$items=t.$list.find(t.params.itemsSelector),t.moveListTo(t.$list,t.state.$current,t.state,!0)),t.call(t.params.onTransitionEnd),t},moveListToPositionLeft:function(e,t,a,n){var r=this,n=(n||(a.isTransition=!0,a.transitionDelay=r.delay(function(){r.triggerTo(e,"transitionend")},3e3),1<Math.abs(a.direction)?e.addClass(r.params.slowTransitionClassName):e.addClass(r.params.transitionClassName)),r.cleanObject());return n[Modernizr.prefixedCSS("transform")]=Modernizr.prefixedCSSValue("transform","translateX("+t+"px)"),e.css(n),r},getItemPosition:function(e){return-1*e.position().left},moveListTo:function(e,t,a,n){t=this.getItemPosition(t);return this.moveListToPositionLeft(e,t,a,n),this},getClosestDOMIndex:function(e){var t=this,a=t.state.$current;return e>t.state.currentRealIndex?a=t.state.$current.next('[data-index="'+e+'"]'):e<t.state.currentRealIndex&&(a=t.state.$current.prev('[data-index="'+e+'"]')),a.index()},goTo:function(e,t){var a=this,n=a.$items.eq(e);return n.data("index")===a.state.currentRealIndex&&!t||(a.state.preventClick=!t,n.length&&!a.state.isTransition&&(a.call(a.params.beforeChange,e,t),a.state.$current&&a.state.$current.length&&(a.state.$current.aria("current","false"),a.state.$current.attr("tabindex","-1"),a.state.$current.find(".js-figure").trigger("figure:stop")),n.aria("current","true"),n.find('[loading="lazy"]').trigger("lazy:load"),a.state.current=n.get(0),a.state.$current=n,a.state.direction=e-a.state.currentDOMIndex,a.state.currentDOMIndex=e,a.state.currentRealIndex=n.data("index"),a.moveListTo(a.$list,n,a.state,t),a.call(a.params.onChange,e,t))),a},goForwards:function(){var e=this.state.currentDOMIndex+1;return this.goTo(e)},goBackwards:function(){var e=this.state.currentDOMIndex-1;return this.goTo(e)},loop:function(){var e=this;function t(e,t){i(t).attr("loading","lazy")}var a=e.$items.clone().addClass(e.params.clonedClassName),n=e.$items.clone().addClass(e.params.clonedClassName);return a.find("img").each(t),n.find("img").each(t),e.$list.prepend(a),e.$list.append(n),a.trigger("lazy:added").trigger("figure:added"),n.trigger("lazy:added").trigger("figure:added"),e.getElements(),e},bindEvents:function(){var a=this;return a.on("transitionend",a.params.listSelector,function(e){e.stopPropagation(),i(e.target).is(a.params.listSelector)&&a.onTransitionEnd()}),a.on("click",a.params.itemsSelector,function(e){var t=i(this).index();a.state.currentDOMIndex===t||a.state.preventClick||(e.preventDefault(),e.stopPropagation(),a.throttle("goTo",function(){a.goTo(t)}))}),a.on("keydown",function(e){switch(e.which){case a.KEYS.ARROW_LEFT:e.preventDefault(),a.throttle("forwards",a.goForwards);break;case a.KEYS.ARROW_RIGHT:e.preventDefault(),a.throttle("backwards",a.goBackwards)}}),a.bind("resize",a.$WINDOW,function(){a.throttle("resize",function(){a.goTo(a.state.currentDOMIndex,!0)},15)}),a.params.swipe&&a.hasPlugin("depotSwipe")&&a.$viewport.depotSwipe({targetSelector:a.params.listSelector,touchThreshold:a.params.swipeThreshold,mouse:!0,onStart:function(e){e.preventDefault(),a.state.preventClick=!0},onMove:function(e,t){e.preventDefault();e=a.getItemPosition(a.state.$current),t=t.current.left-t.start.left;0!=t&&1<a.state.itemsQuantity&&a.moveListToPositionLeft(a.$list,e+t,a.state,!0)},onEnd:function(e,t){e.preventDefault(),e.stopPropagation(),0<t.delta?a.goBackwards():a.goForwards()},onCancel:function(e,t){0!==t.delta?(a.state.direction=0,a.state.preventClick=!0,a.moveListToPositionLeft(a.$list,a.getItemPosition(a.state.$current),a.state,!0)):a.state.preventClick=!1}}),a},init:function(){var e=this;return e.params.loop&&(e.loop(),e.params.startFrom+=e.state.itemsQuantity),e.goTo(e.params.startFrom,!0),e.call(e.params.onInit),e}}),i.fn.depotGallery=function(a){return this.each(function(e,t){i.data(t,"depotGallery",new n(t,a))})}}(jQuery),function(t){"use strict";var a={},r={},n=[];function i(e){return e&&e.replace(/^[#]?[!]?/,"")}function s(e){return e?e.sort().join("&"):""}function e(){return window.addEventListener("hashchange",function(t){n.forEach(function(e){e.call(null,t)})},!1),this}e.prototype={onChange:function(e){return"function"==typeof e&&n.push(e),this},offChange:function(e){e=n.indexOf(e);return-1!==e&&n.splice(e,1),this},get:function(e){var t;return e?e.hash?t=i(e.hash):"string"==typeof e&&(t=i(e)):void 0===e&&(t=i(window.location.hash)),t},create:function(e){var r,t="#!";return"string"==typeof e||"number"==typeof e?t+=e:Array.isArray(e)?t+=s(e):"object"==typeof e&&(t+=(r=e)?s(Object.keys(r).reduce(function(e,t){var a=r[t],n=!0===a?t:t+"="+a;return Array.isArray(a)&&(n=a.map(function(e){return t+"="+e})),Array.prototype.concat(e,n)},[])):""),t},set:function(e,t){e=this.create(e);return e!==window.location.hash&&(t?window.location.hash=e:(t=window.location.toString().split("#")[0],window.location.replace(t+e))),e},add:function(e,t){var a=this.toObject(),n=this.toObject(e);return Object.keys(n).forEach(function(e){a[e]=n[e]}),this.set(a,t)},replace:function(e,t,a){var n,r=this.indexOf(e),i=this.indexOf(t);return-1!==r&&-1===i?((n=this.toArray())[r]=t,this.set(n,a)):-1!==r&&-1!==i&&r!==i?this.remove(e,a):-1===r&&-1===i&&this.add(t,a)},remove:function(e,t){var a,e=this.indexOf(e);return-1!==e&&((a=this.toArray()).splice(e,1),this.set(a,t))},clear:function(e){return this.set("",e)},toArray:function(e){var t=[];return(e=e||this.get())&&(a[e]?t=a[e]:(e.split("&").forEach(function(e){-1===t.indexOf(e)&&(t=t.concat([e]))}),a[e]=t)),t.concat()},toObject:function(e){var n={};return e=e||this.get(),"string"==typeof(e=Array.isArray(e)?s(e):e)||"number"==typeof e?r[e]?n=r[e]:(e.split("&").sort().forEach(function(e){var t,e=e.split("="),a=e[0],e=e[1];""!==a&&(void 0===n[a]?n[a]=void 0===e||e:-1===(t=Array.prototype.concat(n[a])).indexOf(e)&&(n[a]=Array.prototype.concat(t,e)))}),r[e]=n):"object"==typeof e&&(n=e),t.extend(null,n)},indexOf:function(e){var t=this.toArray();return void 0!==e&&t.length?t.indexOf(e.toString()):-1},has:function(e){return e instanceof RegExp?!!this.getMatched(e).length:-1!==this.indexOf(e)},replaceMatchedCompile:function(t,a,e){var n=this.toArray();return this.set(n.map(function(e){return t.test(e)?e.replace(t,function(e,t){return e.replace(t,a)}):(t.toString().replace(t,a),e)}),e)},getMatched:function(a,n){var e=this.toArray(),r=[];return e.forEach(function(e){var t=e.match(a);t&&e.length&&(r.push(e),"function"==typeof n&&n.call(null,e,t))}),r},removeMatched:function(t,e){var a=this.toArray(),n=[];return a.forEach(function(e){!t.test(e)&&e.length&&n.push(e)}),this.set(n,e)},replaceMatched:function(t,e,a){var n=this.toArray(),r=[];return n.forEach(function(e){!t.test(e)&&e.length&&r.push(e)}),void 0!==e&&e.length&&r.push(e),this.set(r,a)},whenMatched:function(e,t){function a(){n.has(e)&&(n.removeMatched(e),t.call(null))}var n=this;return"function"==typeof t&&(a(),this.onChange(a)),this}},t.depotHash=new e}(jQuery),function(n){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=n.extend(!0,{},n.depotProto,{pluginName:"depotLazy",defaults:{headerSelector:".js-header",rootMargin:{top:500,left:300,right:300,bottom:500}},hasIntersectionObserver:function(){var e=!1;return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}),e=!0),e},onload:function(){return this.trigger("lazy:done"),this.unbindEvents(),this},onerror:function(){return this.unbindEvents(),this},initLoad:function(t){var e=n(t).data(),a=e.depotLazy;return a.unbindEvents(),e&&e.src?(t.onload=function(e){return a.observer&&(a.observer.unobserve(t),a.unbind("update",a.$WINDOW)),a.onload(t,e)},t.onerror=function(e){return a.observer&&(a.observer.unobserve(t),a.unbind("update",a.$WINDOW)),a.onerror(t,e)},e.srcset&&(t.srcset=e.srcset),n.data(t,"thumb",t.src),t.loading="eager",t.src=e.src):a.observer&&a.observer.unobserve(t),a},getViewport:function(){var e=this,t=0,a=(e.$header.length&&(t=parseFloat(e.$header.outerHeight())),Math.round(e.$container.offset().top)),n=Math.round(e.$container.offset().left),r=Math.round(a+e.$container.outerHeight(!0)),i=Math.round(n+e.$container.outerWidth(!0)),s=e.$WINDOW.scrollTop()-e.params.rootMargin.top,o=s+e.$WINDOW.innerHeight()+e.params.rootMargin.bottom,l=e.$WINDOW.scrollLeft()-e.params.rootMargin.left;return{headerHeight:t,containerTop:a,containerRight:i,containerBottom:r,containerLeft:n,windowTop:s,windowRight:l+e.$WINDOW.innerWidth()+e.params.rootMargin.right,windowBottom:o,windowLeft:l}},updateViewport:function(){return this.state.viewport=this.getViewport(),this},inViewport:function(){var e=this,t=e.state.viewport.containerBottom<e.state.viewport.windowTop,a=e.state.viewport.containerTop>e.state.viewport.windowBottom,n=e.state.viewport.containerLeft<e.state.viewport.windowLeft,r=e.state.viewport.containerRight>e.state.viewport.windowRight,e=!e.isCSSVisible(e.image);return!(t||a||n||r||e)},isCSSVisible:function(e){return"visible"===window.getComputedStyle(e).visibility},getObserver:function(){var t=this,e={rootMargin:t.format("${top}px ${right}px ${bottom}px ${left}px",t.params.rootMargin),threshold:0};return window.lazyObserver=new window.IntersectionObserver(function(e){e.forEach(function(e){(e.isIntersecting||0<e.intersectionRatio)&&(t.isCSSVisible(e.target)?t.initLoad(e.target):t.delay(function(){t.isCSSVisible(e.target)&&t.initLoad(e.target)},300))})},e),window.lazyObserver},initObserver:function(){var e=this;return e.observer=window.lazyObserver||e.getObserver(),e.observer.observe(e.image),e},bindEvents:function(){var t=this;return t.hasIntersectionObserver()?t.initObserver():t.bind("load scroll resize lazy:check",t.$WINDOW,function(e){t.updateViewport(),t.inViewport()&&t.initLoad(t.image)}),t.one("lazy:load",function(){t.initLoad(t.image)}),t.bind("update",t.$WINDOW,function(){t.hasIntersectionObserver()?(t.observer.unobserve(t.image),t.observer.observe(t.image)):(t.updateViewport(),t.inViewport()&&t.initLoad(t.image))}),t},getInitialState:function(){return this.image=this.container,{viewport:this.getViewport()}},init:function(){var e=this;return e.$header=n(e.params.headerSelector),e.delay(function(){e.triggerTo(e.$WINDOW,"lazy:check")}),e}}),n.fn.depotLazy=function(a){return this.each(function(e,t){n(t).data("src")&&n.data(t,"depotLazy",new r(t,a))})}}(jQuery),function(i){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=i.extend(!0,{},i.depotProto,{pluginName:"depotLoaderMore",defaults:{buttonSelector:".js-load-more-button",targetSelector:".js-load-more-here",processingClassName:"is-processing",lastSelector:".is-last",method:"GET",dataType:"html",dataParam:"base",pageParam:"page",inheritGetParams:!0,onSuccess:null,onError:null},getSearch:function(e){e?"object"==typeof e?t=e.search:"string"==typeof e&&(t=e):t=window.location.search;var t,e=t&&t.match(/^[?](.*)/);return e&&e.length?e[1]:""},checkButton:function(){var e=this;return"html"===e.params.dataType&&e.$target.find(e.params.lastSelector).length&&e.$button.detach(),e},loadMore:function(e){var n,r=this;return r.state.busy||(r.startProcess(),n=r.cleanObject(),r.params.inheritGetParams?(r.state.get=i.depotParse(window.location.search),n=i.extend(!0,r.state.get,e)):e&&(n=e),r.state.request=i.ajax({url:r.cache.requestUrl,type:r.params.method,dataType:r.params.dataType,data:n,success:function(e){r.stopProcess(),e&&(r.increasePage(),"function"==typeof r.params.onSuccess?r.call(r.params.onSuccess,e):"html"===r.params.dataType&&r.$target.append(e),r.checkButton())},error:function(e,t,a){r.stopProcess(),r.error({action:"DepotLoaderMore.loadMore",data:{url:r.cache.requestUrl,type:r.params.method,data:n},name:t,number:e.status,message:a}),r.call(r.params.onError,e)}})),r},increasePage:function(){var e=this,t=e.$button.get(0),a=e.getSearch(t),a=i.depotParse(a),n=parseInt(a[e.params.pageParam]);return isNaN(n)||(a[e.params.pageParam]=n+1,t.search="?"+i.param(a,!0)),e},startProcess:function(){return this.state.busy=!0,this.$container.addClass(this.params.processingClassName).aria("busy","true"),this},stopProcess:function(){return this.state.busy=!1,this.$container.removeClass(this.params.processingClassName).aria("busy","false"),this},bindEvents:function(){var a=this;return a.bind("online",a.$WINDOW,function(){a.state.offline=!1,a.$button.removeClass("is-disabled").prop("disabled",!1)}),a.bind("offline",a.$WINDOW,function(){a.state.offline=!0,a.$button.addClass("is-disabled").prop("disabled",!0)}),a.$button.on("click",function(e){e.preventDefault();var t=this;a.state.offline?a.hasPlugin("depotNotifications")&&i.depotNotifications.warn({ru:"Проверьте подключение к сети.",en:"Check your network connection."}):a.debounce("click",function(){var e;a.state.search=a.getSearch(t),a.hasPlugin("depotParse")&&(e=i.depotParse(a.state.search),a.loadMore(e))})}),a},init:function(){var e=this;return e.cache.requestUrl=e.$button.data(e.params.dataParam),e.call(e.params.onInit),e}}),i.fn.depotLoaderMore=function(a){return this.each(function(e,t){i.data(this,"depotLoaderMore",new n(t,a))})}}(jQuery),function(l){"use strict";function e(){this.$container=l(".js-notifications"),this.$container.on("click",".js-notification-close",function(e){e.preventDefault(),l(this).closest(".js-notification").aria("hidden",!0)})}e.prototype={template:'<div class="notification notification_default notification_${mod}" role="alert" aria-hidden="true"><div class="notification__container"><div class="notification__row"><div class="notification__text"><p>${text}</p></div><button class="notification__close js-notification-close" type="button" aria-label="${close}"></button></div></div></div>',timeout:7500,minTimeout:2500,maxTimeout:6e4,log:function(e,t){var a=this,n=t&&t.mod||"log",r=l.depotProto.clamp(a.minTimeout,t&&t.timeout||a.timeout,a.maxTimeout),i=t&&t.context||{},s=t&&t.callback||null,o=l(l.depotProto.format(a.template,{mod:n,text:l.depotProto.format(l.depotProto.translate(e),i),close:l.depotProto.translate({ru:"Закрыть",en:"Close"})}));a.$container.prepend(o),l.depotProto.delay(function(){function t(){o.on("transitionend",function(e){e.preventDefault(),e.stopPropagation(),o.remove(),"function"==typeof s&&s.call(null)}),o.aria("hidden",!0)}o.get(0).style.setProperty("--timeout",r+"ms"),o.aria("hidden",!1);var a=l.depotProto.delay(t,r);o.on("click",".js-notification-close",function(e){e.preventDefault(),l.depotProto.cancelDelay(a),t.call()})},100)},warn:function(e,t){return window.navigator&&"function"==typeof window.navigator.vibrate&&window.navigator.vibrate(200),this.log(e,l.extend(t,{mod:"warning"}))},info:function(e,t){return this.log(e,l.extend(t,{mod:"info"}))}},l.depotNotifications=new e}(jQuery),function(o){"use strict";function l(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}o.depotParse=function a(e,t){var n,r,i=o.extend(!0,{merge:!1,empty:!0,split:"&",assign:"=",reverse:!1,traditional:!0,encode:!1},t),s=null;return"object"===l(e)?(t="",(n=i).reverse&&(r=[],o.each(e,function(a,e){void 0===e?n.empty&&r.push(a):e instanceof Array?o.each(e,function(e,t){n.traditional?r.push(a+n.assign+t):r.push(a+"[]"+n.assign+t)}):n.traditional?r.push(a+n.assign+e):o.each(e,function(e,t){r.push(a+"["+e+"]"+n.assign+t)})}),t=n.encode?encodeURI(r.join(n.split)):r.join(n.split)),s=t):"string"===l(e)?s=function(e,t){var a=null;if(e.length){var n=(0===e.indexOf("?")?e.substr(1):e).split(t.split),r=n.length;if(r)for(var i=0;i<r;i+=1){var s,o=new RegExp("([^"+t.assign+"]*)"+t.assign+"?(.*)","i"),o=n[i].match(o);o&&o.length&&(s=decodeURIComponent(o[1]),void 0===(o=(o=o[2])&&!isNaN(o)?parseFloat(o):o?decodeURIComponent(o.toString()):void 0)&&!0!==t.empty||s&&s.length&&((a=a||{})[s]?a[s]instanceof Array?!0===t.merge&&-1!==a[s].indexOf(o)||a[s].push(o):!0===t.merge&&a[s]===o||(a[s]=[a[s],o]):a[s]=o))}}return a}(e,i):"array"===l(e)&&o.each(e,function(e,t){s=o.extend(!0,s,a(t,i))}),s}}(jQuery),function(n){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=n.extend(!0,{},n.depotProto,{pluginName:"depotPopup",defaults:{buttonSelector:".js-popup-toggle",bodySelector:".js-popup-body",closeButtonSelector:".js-popup-close",fieldsSelector:'input:not([type="hidden"]), textarea, select',visibleClassName:"is-visible",addBodyClass:"is-cropped",hideDebounce:300,resetScroll:!1,mediaQuery:"",kickOff:!0,useHash:!0,hashRe:!1,onHashChange:null,beforeShow:null,beforeHide:null,onShow:null,onHide:null,onToggle:null},getID:function(){return this.$container.attr("id")},onHashChange:function(){var e=this,t=n.depotHash.has(e.params.hashRe||e.state.hash);return t?(e.state.isVisible||e.debounce("hashChange",e.show),e.call(e.params.onHashChange)):!t&&e.state.isVisible&&(e.debounce("hashChange",e.hide),e.call(e.params.onHashChange)),e},preventShow:function(){return this.state.preventShow=!0,this},startProcessing:function(){return this.$body.addClass(this.params.processingClassName),this},stopProcessing:function(){return this.$body.removeClass(this.params.processingClassName),this},preventKickOff:function(){var e=this;return e.params.hideDebounce&&(e.state.hideDebounce=!0,e.delay(function(){delete e.state.hideDebounce},e.params.hideDebounce)),e},hide:function(e,t){var a=this;return a.state.isVisible&&(a.call(a.params.beforeHide,e,t),a.state.isVisible=!1,a.$container.removeClass(a.params.visibleClassName),a.$container.attr("hidden",!0),a.$container.attr("tabindex","-1"),a.params.useHash&&a.hasPlugin("depotHash")&&(a.params.hashRe?n.depotHash.has(a.params.hashRe)&&n.depotHash.removeMatched(a.params.hashRe):n.depotHash.remove(a.state.hash)),a.params.addBodyClass&&!a.state.preventRemoveBodyClass&&a.$BODY.removeClass(a.params.addBodyClass),a.$container.scrollTop(0),a.$container.scrollLeft(0),a.state=a.getInitialState(),a.call(a.params.onHide,e,t)),a},show:function(e,t){var a=this;return a.state.isVisible||(a.call(a.params.beforeShow,e,t),a.state.preventShow?a.state.preventShow=!1:(a.preventKickOff(),a.state.isVisible=!0,a.$container.addClass(a.params.visibleClassName),a.$container.attr("hidden",!1),a.$container.attr("tabindex","0"),a.params.useHash&&a.hasPlugin("depotHash")&&(a.params.hashRe?n.depotHash.has(a.params.hashRe)?a.state.hash=n.depotHash.getMatched(a.params.hashRe)[0]:n.depotHash.add(a.state.hash):n.depotHash.has(a.state.hash)||n.depotHash.add(a.state.hash)),a.params.resetScroll&&window.scrollTo(0,0),a.params.addBodyClass&&(a.delay(function(){a.state.isVisible&&(a.$BODY.hasClass(a.params.addBodyClass)?a.state.preventRemoveBodyClass=!0:(a.state.preventRemoveBodyClass=!1,a.$BODY.addClass(a.params.addBodyClass)),a.$WINDOW.trigger("update"),a.$WINDOW.trigger("resize"))},10),a.delay(function(){a.state.isVisible&&(a.$fields.length?a.$fields:a.$container).get(0).focus()},100)),a.call(a.params.onShow,e,t))),a},toggle:function(){var e=this;return e.state.isVisible?e.hide():e.show(),e.call(e.params.onToggle),e},bindEvents:function(){var a=this;return a.bind("click",a.$BODY,a.params.buttonSelector,function(e){e.preventDefault(),a.debounce("toggle",a.toggle)}),a.on("click",a.params.closeButtonSelector,function(e){e.preventDefault(),a.debounce("close",a.hide)}),a.on("popup:show",function(e,t){a.debounce("show",function(){a.show(e,t)})}),a.on("popup:hide",function(e,t){a.debounce("hide",function(){a.hide(e,t)})}),a.params.useHash&&a.hasPlugin("depotHash")&&n.depotHash.onChange(function(){a.onHashChange()}),a.params.kickOff&&a.bind("click",a.$DOCUMENT,function(e){a.state.hideDebounce||n(e.target).closest("body").length&&!n(e.target).closest(a.params.bodySelector).length&&a.state.isVisible&&a.hide()}),a.params.mediaQuery&&(window.matchMedia(a.params.mediaQuery).onchange=function(e){a.state.isVisible&&!e.matches&&a.hide()}),a.bind("keyup",a.$BODY,function(e){a.state.isVisible&&e.which===a.KEYS.ESCAPE&&(e.preventDefault(),a.hide())}),a},getInitialState:function(){var e=this,t=e.getID(),a=t;return{id:t,hash:a=e.params.useHash&&e.hasPlugin("depotHash")&&e.params.hashRe&&n.depotHash.has(e.params.hashRe)&&n.depotHash.getMatched(e.params.hashRe)[0]||a,isVisible:!1,hideDebounce:!1,preventShow:!1,preventRemoveBodyClass:!1}},init:function(){var e=this;return e.$fields=e.$container.find(e.params.fieldsSelector),e.params.useHash&&e.hasPlugin("depotHash")&&n.depotHash.has(e.params.hashRe||e.state.hash)&&e.show(),e.call(e.params.onInit),e}}),n.fn.depotPopup=function(a){return this.each(function(e,t){n.data(t,"depotPopup",new r(t,a))})}}(jQuery),function(i){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=i.extend(!0,{},i.depotProto,{pluginName:"depotSharing",defaults:{buttonSelector:".js-sharing-button",dataParam:"action",width:640,height:436},getInitialState:function(){return this.cleanObject({})},getContext:function(e){var t=document.title,a=window.location.href,n=i('meta[name="description"]').attr("content"),r=e.title;return this.cleanObject(e.dataset,{url:a,title:encodeURIComponent(t),text:encodeURIComponent(n),windowTitle:r})},openWindow:function(e,t){var t=this.cleanObject(this.params,t),e=this.format(e,t),a=this.format("width=${width},height=${height},toolbar=0,status=0",t);return window.open(e,t.title,a)},share:function(e){var t=this,a={fb:function(e){t.openWindow("https://www.facebook.com/sharer/sharer.php?u=${url}",e)},vk:function(e){t.openWindow("https://vk.com/share.php?url=${url}",e)},tw:function(e){t.openWindow("https://twitter.com/intent/tweet?text=${title}%20${url}",e)},lin:function(e){t.openWindow("https://www.linkedin.com/shareArticle?mini=true&url=${url}&title=${title}&summary=${text}",e)},ok:function(e){t.openWindow("https://connect.ok.ru/offer?url=${url}&title=${title}&description=${text}",e)},cp:function(e){navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e.url).then(function(){i.depotNotifications.info({ru:"Ссылка на страницу скопирована.",en:"Link to page copied."})},function(){i.depotNotifications.warn({ru:"Произошла ошибка при попытке копирования.",en:"An error occurred while trying to copy."})}):i.depotNotifications.warn({ru:"Ваш браузер не поддерживает функцию копирования.",en:"Your browser does not support the copy function."})}},e=t.getContext(e);return e.action&&t.call(a[e.action],e),t},bindEvents:function(){var a=this;return a.on("click",a.params.buttonSelector,function(e){e.preventDefault();var t=this;a.debounce("share",function(){a.share(t)})}),a},init:function(){return this}}),i.fn.depotSharing=function(a){return this.each(function(e,t){i.data(this,"depotSharing",new n(t,a))})}}(jQuery),function(r){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=r.extend(!0,{},r.depotProto,{pluginName:"depotSticky",defaults:{position:"top",minWidth:0,offsetTop:0,offsetBottom:0},setStyles:function(e,t){var a=this,n=r.param(e);return a.$container.css(e),t&&a.state.flatStyles!==n&&(a.state.flatStyles=n,a.trigger("position:"+a.state.currentPosition)),a},resetStyles:function(){return this.setStyles({position:"",top:"",bottom:"",width:""}),delete this.state.currentPosition,this},updateSize:function(){var e=this,t=(e.resetStyles(),e.$container.offset().top),a=Math.round(e.$container.outerHeight(!0)),t=(e.state.element={top:t,bottom:t+a,height:a,width:e.$container.outerWidth()},e.$parent.offset().top),a=Math.round(e.$parent.outerHeight(!0));return e.state.parent={top:t,bottom:t+a,height:a,width:e.$parent.width()},window.innerWidth>=e.params.minWidth&&e.updatePosition(),e},updatePosition:function(){var e,t=this,a=t.$WINDOW.scrollTop(),n=a+t.params.offsetTop,a=a+window.innerHeight-t.params.offsetBottom,r={position:"",top:"",bottom:"",width:""};return t.state.currentPosition||(t.state.currentPosition="default"),t.state.parent.height>t.state.element.height&&(e="default","top"===t.params.position?(t.state.parent.top<=n&&(r.position="fixed",r.top=t.params.offsetTop,e="fixed"),t.state.parent.bottom<=n+t.state.element.height&&(r.position="absolute",r.top="",r.bottom=0,e="bottom")):"bottom"===t.params.position&&(e=t.state.parent.top+t.state.element.height<=a&&t.state.parent.bottom>=a?(r.position="fixed",r.bottom=t.params.offsetBottom,"fixed"):(r.position="absolute",r.bottom=0,"bottom")),r.width=t.state.element.width),t.state.currentPosition!==e&&(t.state.currentPosition=e,t.setStyles(r,!0)),t},bindEvents:function(){var e=this;return e.bind("resize scroll update",e.$WINDOW,function(){e.updateSize(),e.updatePosition()}),e},init:function(){var e=this;return e.$parent=e.$container.parent(),e.updateSize(),e.updatePosition(),e}}),r.fn.depotSticky=function(a){return this.each(function(e,t){r.data(t,"depotSticky",new n(t,a))})}}(jQuery),function(l){"use strict";var i=[],c={type:"local",path:"/"};function u(e){return"object"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(e)}function d(t){var a,t=decodeURIComponent(t);try{a=JSON.parse(t)}catch(e){"NaN"===t?a=NaN:"undefined"!==t&&(a=t)}return a}function p(t,a,n,r){i.forEach(function(e){"function"==typeof e&&e.call(t,a,n,r)})}function m(){var t=l.depotProto.cleanObject();return document.cookie.split(/\s?;\s?/).forEach(function(e){e=e.match(/^([^=]+)=([^=;]+)$/);e&&(t[e[1]]=e[2])}),t}function e(){var t=this;return l(window).on("storage.depotStorage",function(e){p(t,"local",e.originalEvent.key,e.originalEvent)}),t}e.prototype={onChange:function(e){return"function"==typeof e&&-1===i.indexOf(e)&&i.push(e),this},offChange:function(e){return"function"==typeof e&&-1!==i.indexOf(e)?i.splice(i.indexOf(e),1):"all"===e&&(i=[]),this},setItem:function(e,t,a){var n=!1,r=l.extend(!0,{},c,a),i=u(t);switch(r.expires&&(a=r.expires,t=!1,a=(a||"").toString().replace(/^([0-9.-]+)(Y|M|D|h|m|s|ms)$/,function(e,t,a){var t=parseFloat(t),n=1;switch(a){case"Y":n=31536e6;break;case"M":n=2592e6;break;case"D":n=864e5;break;case"h":n=36e5;break;case"m":n=6e4;break;case"s":n=1e3;break;default:n=1}return isNaN(t)?0:t*n}),a=parseFloat(a),(a=isNaN(a)?0:a)&&(t=new Date).setTime(t.getTime()+a),a=t,r.expires=a?a.toUTCString():0),r.type){case"cookie":var s=e+"="+i;r&&Object.keys(r).forEach(function(e){var t=r[e];"type"!==e&&(s+="; "+e+"="+t)});try{document.cookie=s,n=!0}catch(e){}break;case"session":var o=u(l.extend(!0,r,{value:i}));try{sessionStorage.setItem(e,o),n=!0}catch(e){}break;default:o=u(l.extend(!0,r,{value:i}));try{localStorage.setItem(e,o),n=!0}catch(e){}}return p(this,r.type,e),n},getItem:function(e,t){var a;switch(t="object"==typeof t?t.type:t){case"cookie":try{var n=m();n[e]&&(a=d(n[e]))}catch(e){}break;case"session":try{var r,i=d(sessionStorage.getItem(e));i&&("object"==typeof i?(r=Date.parse(i.expires))&&r<Date.now()?this.removeItem(e,t):a=d(i.value):a=i)}catch(e){}break;default:try{var s,o=d(localStorage.getItem(e));o&&("object"==typeof o?(s=Date.parse(o.expires))&&s<Date.now()?this.removeItem(e,t):a=d(o.value):a=o)}catch(e){}}return a},getItemMeta:function(e,t){var a;switch(t="object"==typeof t?t.type:t){case"cookie":break;case"session":try{a=d(sessionStorage.getItem(e))}catch(e){}break;default:try{a=d(localStorage.getItem(e))}catch(e){}}return a},removeItem:function(e,t,a){switch("object"==typeof t&&(a=t=t.type),t){case"cookie":try{var n={type:t,expires:"-1Y"};a&&a.domain&&(n.domain=a.domain),this.setItem(e,null,n)}catch(e){}break;case"session":try{sessionStorage.removeItem(e)}catch(e){}break;default:try{localStorage.removeItem(e)}catch(e){}}p(this,t,e)},removeMatched:function(t,a){var n=this;switch(a="object"==typeof a?a.type:a){case"cookie":try{var e=m();Object.keys(e).forEach(function(e){new RegExp(t,"i").test(e)&&n.removeItem(e,a)})}catch(e){}break;case"session":try{Object.keys(sessionStorage).forEach(function(e){new RegExp(t,"i").test(e)&&sessionStorage.removeItem(e)})}catch(e){}break;default:try{Object.keys(localStorage).forEach(function(e){new RegExp(t,"i").test(e)&&localStorage.removeItem(e)})}catch(e){}}p(n,a)},clear:function(t){var a=this;switch(t){case"cookie":try{var e=m();Object.keys(e).forEach(function(e){a.removeItem(e,t)})}catch(e){}break;case"session":try{sessionStorage.clear()}catch(e){}break;default:try{localStorage.clear()}catch(e){}}p(a,t)}},navigator.cookieEnabled||l.depotNotifications.warn({ru:"Для полной функциональности этого сайта необходимо включить файлы cookie.",en:"For full functionality of this site it is necessary to enable cookies."},{timeout:6e4}),l.depotStorage=new e}(jQuery),function(i){"use strict";var e={START:{pointer:["pointerdown"],touch:["touchstart"],ms:["mspointerdown"],mouse:["mousedown"]},MOVE:{pointer:["pointermove"],touch:["touchmove"],ms:["mspointermove"],mouse:["mousemove"]},END:{pointer:["pointerup"],touch:["touchend"],ms:["mspointerup"],mouse:["mouseup"]},CANCEL:{pointer:["pointerleave","pointercancel"],touch:["touchcancel"],ms:["mspointercancel"],mouse:["mouseleave"]}};function n(e,t){return this.call(this._init,e,t)}n.prototype=i.extend(!0,{},i.depotProto,{pluginName:"depotSwipe",defaults:{targetSelector:!1,mouse:!0,swipeThreshold:30,onStart:null,onMove:null,onEnd:null,onCancel:null},getInitialState:function(){return{EVENTS:this.detectEvents()}},detectEvents:function(){var r=this.cleanObject();return i.each(e,function(n,e){i.each(e,function(e,t){var a=!0;return i.each(t,function(e,t){"on"+t in document.documentElement&&(a=!1,r[n]?r[n].push(t):r[n]=[t])}),a})}),r},normalizePointer:function(e){var t=new RegExp("pointer","i"),a=new RegExp("pointer","i"),t=t.test(e.originalEvent.type),a=a.test(e.originalEvent.type),n=e.pageX,r=e.pageY,i=!0;return e.originalEvent&&a?(i="mouse"===e.pointerType,n=e.originalEvent.pageX,r=e.originalEvent.pageY):e.originalEvent&&e.originalEvent.touches?(i=!1,e.originalEvent.touches.length&&(n=e.originalEvent.touches[0].pageX,r=e.originalEvent.touches[0].pageY)):e.targetTouches?(i=!1,e.targetTouches.length&&(n=e.targetTouches[0].pageX,r=e.targetTouches[0].pageY)):e.originalEvent&&t&&this.params.mouse&&(n=e.originalEvent.pageX,r=e.originalEvent.pageY),{left:parseInt(n,10),top:parseInt(r,10),isMouse:i}},getPosition:function(){var e=this.$container.parent().offset();return{top:this.state.current.top-e.top,left:this.state.current.left-e.left}},getState:function(){return this.cleanObject(this.state)},start:function(e){var t=this;return t.state.isActive||(t.state.isActive=!0,t.state.start=t.normalizePointer(e),t.state.current=t.state.start,t.state.last=t.state.start,t.state.path=[t.state.start],t.state.position=t.getPosition(),t.call(t.params.onStart,e,t.getState())),t},move:function(e){var t=this;return t.state.isActive&&(t.state.last=t.cleanObject(t.state.current),t.state.current=t.normalizePointer(e),t.state.delta={top:t.state.last.top-t.state.current.top,left:t.state.last.left-t.state.current.left},t.state.path.push(t.state.current),t.state.position=t.getPosition(),t.call(t.params.onMove,e,t.getState())),t},end:function(e){var t=this;return t.state.isActive&&(t.state.isActive=!1,t.state.delta=t.state.current.left-t.state.start.left,Math.abs(t.state.delta)>=t.params.swipeThreshold?t.call(t.params.onEnd,e,t.getState()):t.call(t.params.onCancel,e,t.getState())),t},cancel:function(e){var t=this;return t.state.isActive&&(t.state.isActive=!1,t.state.delta=t.state.current.left-t.state.start.left,t.call(t.params.onCancel,e,t.getState())),t},bindEvents:function(){var e=this;return e.bind(e.state.EVENTS.START,e.$container,e.params.targetSelector,e.start.bind(e)),e.bind(e.state.EVENTS.MOVE,e.$DOCUMENT,e.move.bind(e)),e.bind(e.state.EVENTS.END,e.$DOCUMENT,e.end.bind(e)),e.bind(e.state.EVENTS.CANCEL,e.$DOCUMENT,e.cancel.bind(e)),e},init:function(){return this.call(this.params.onInit),this}}),i.fn.depotSwipe=function(a){return this.each(function(e,t){i.data(this,"depotSwipe",new n(t,a))})}}(jQuery),function(s){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=s.extend(!0,{},s.depotProto,{pluginName:"depotTabs",defaults:{tabListSelector:".js-tabs-list",tabsSelector:".js-tabs-tab",panelsSelector:".js-tabs-panel",useHash:!1,hashParam:"tab",cache:!0,beforeChange:null,onChange:null},getHashRe:function(e){return void 0===e&&(e=this.params.hashParam),new RegExp("^"+e+"=(.*)$","i")},getHashString:function(e,t){return[t=void 0===t?this.params.hashParam:t,e].join("=")},getTabSlug:function(e){var t;return e&&e.length?e.aria("controls"):t},getFirstTabSlug:function(){var e=this,t=(e.params.cache?e.$tabs:e.$container.find(e.params.tabListSelector)).first();return e.getTabSlug(t)},getValidTabSlug:function(e){var t,a=this;return a.params.cache?a.cache.tabs[e]&&a.cache.panels[e]?t=e:a.state.activeTabSlug||(t=a.getFirstTabSlug()):a.getTab(e).length?t=e:a.state.activeTabSlug||(t=a.getFirstTabSlug()),t},getActiveTabSlug:function(){var e=this.getActiveTab();return this.getTabSlug(e)},getNextTabSlug:function(e){var t=this,e=(void 0===e&&(e=t.getActiveTab()),t.params.cache||(t.$tabs=t.$tabList.find(t.params.tabsSelector)),e.next(t.params.tabsSelector));return e.length||(e=t.$tabs.first()),t.getTabSlug(e)},getPrevTabSlug:function(e){var t=this,e=(void 0===e&&(e=t.getActiveTab()),t.params.cache||(t.$tabs=t.$tabList.find(t.params.tabsSelector)),e.prev(t.params.tabsSelector));return e.length||(e=t.$tabs.last()),t.getTabSlug(e)},getPanelSlug:function(e){var t;return e&&e.length?e.attr("id"):t},getNextPanelSlug:function(){var e=this,t=(e.params.cache||(e.$panels=e.$container.children(e.params.panelsSelector)),e.state.$activePanel||(e.state.$activePanel=e.$panels.first()),e.state.$activePanel.next(e.params.panelsSelector));return t.length||(t=e.$panels.first()),e.getPanelSlug(t)},getPrevPanelSlug:function(){var e=this,t=(e.params.cache||(e.$panels=e.$container.children(e.params.panelsSelector)),e.state.$activePanel||(e.state.$activePanel=e.$panels.first()),e.state.$activePanel.prev(e.params.panelsSelector));return t.length||(t=e.$panels.last()),e.getPanelSlug(t)},cacheTabs:function(){var a=this;a.cache.tabs=a.cleanObject(),a.$tabs.each(function(){var e=s(this),t=a.getTabSlug(e);a.cache.tabs[t]=e})},cachePanels:function(){var a=this;a.cache.panels=a.cleanObject(),a.$panels.each(function(){var e=s(this),t=a.getPanelSlug(e);a.cache.panels[t]=e})},getTab:function(e){return this.$tabList.find(this.params.tabsSelector+'[aria-controls="'+e+'"]')},getPanel:function(e){return this.$container.children(this.params.panelsSelector+'[id="'+e+'"]')},getActiveTab:function(){return this.params.cache?this.$tabs.filter('[aria-selected="true"]'):this.$tabList.find(this.params.tabsSelector+'[aria-selected="true"]')},getActivePanel:function(){return this.params.cache?this.$panels.filter('[aria-hidden="false"]'):this.$container.children(this.params.panelsSelector+'[aria-hidden="false"]')},changeTo:function(e,t){var a,n,r,i=this;return i.state.activeTabSlug&&i.state.activeTabSlug===e||(n=i.state.activeTabSlug,r=i.params.cache?(a=i.cache.tabs[e],i.cache.panels[e]):(a=i.getTab(e),i.getPanel(e)),a&&r&&a.length&&r.length&&(i.call(i.params.beforeChange,i.$container,i.state.$activePanel),i.setInactiveTab(i.getActiveTab()),i.setInactivePanel(i.getActivePanel()),i.setActiveTab(a,t),i.setActivePanel(r),i.state.activeTabSlug=e,i.state.$activeTab=a,i.state.$activePanel=r,i.$WINDOW.trigger("update"),i.params.useHash&&i.hasPlugin("depotHash")&&(n?s.depotHash.replaceMatched(i.getHashRe(),i.getHashString(e),!1):s.depotHash.add(i.getHashString(e),!1)),i.call(i.params.onChange,i.$container,i.state.$activePanel))),i},changeToFirst:function(){this.changeTo(this.getFirstTabSlug())},setActivePanel:function(e){return e&&e.length&&(e.aria("hidden","false"),e.attr("tabindex","0")),e},setInactivePanel:function(e){return e&&e.length&&(e.aria("hidden","true"),e.attr("tabindex","-1")),e},setActiveTab:function(e,t){return e&&e.length&&(e.aria("selected","true").attr("tabindex","0"),t&&e.get(0).focus()),e},setInactiveTab:function(e){return e&&e.length&&e.aria("selected","false").attr("tabindex","-1"),e},disableTab:function(e){return e&&e.length&&e.aria("disabled","true"),e},enableTab:function(e){return e&&e.length&&e.aria("disabled","false"),e},bindEvents:function(){var n=this;return n.$tabList.on("click",n.params.tabsSelector,function(e){e.target===this&&e.preventDefault();var t=s(this);n.debounce("tabClick",function(){n.changeTo(n.getTabSlug(t),!0)})}),n.$tabList.on("keydown",n.params.tabsSelector,function(e){var t=s(this);e.which===n.KEYS.SPACE||e.which===n.KEYS.ENTER?(e.target===this&&e.preventDefault(),n.debounce("tabClick",function(){n.changeTo(n.getTabSlug(t),!0)})):e.which===n.KEYS.ARROW_LEFT?(e.target===this&&e.preventDefault(),n.debounce("tabClick",function(){n.changeTo(n.getPrevTabSlug(t),!0)})):e.which===n.KEYS.ARROW_RIGHT&&(e.target===this&&e.preventDefault(),n.debounce("tabClick",function(){n.changeTo(n.getNextTabSlug(t),!0)}))}),n.params.useHash&&n.hasPlugin("depotHash")&&s.depotHash.onChange(function(){var a;s.depotHash.getMatched(n.getHashRe(),function(e,t){t&&t[1]&&(a=n.getValidTabSlug(t[1]))}),a&&n.changeTo(a,!1)}),n},init:function(){var a=this,n=(a.params.cache&&(a.state.$activeTab=a.getActiveTab(),a.state.$activePanel=a.getActivePanel(),a.cacheTabs(),a.cachePanels()),(n=a.getActiveTabSlug())||a.getFirstTabSlug());return a.params.useHash&&(a.hasPlugin("depotHash")?s.depotHash.getMatched(a.getHashRe(),function(e,t){t&&t[1]&&(n=a.getValidTabSlug(t[1]))}):a.params.useHash=!1),a.changeTo(n,!1),a.call(a.params.onInit),a}}),s.fn.depotTabs=function(a){return this.each(function(e,t){s.data(this,"depotTabs",new n(t,a))})}}(jQuery),function(n){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=n.extend(!0,{},n.depotProto,{pluginName:"diafilm",defaults:{playerSelector:".js-diafilm-player",iframeSelector:".js-diafilm-iframe",upSelector:".js-diafilm-up",downSelector:".js-diafilm-down"},getInitialState:function(){return this.cleanObject({})},execAction:function(e){return this.iframe.contentWindow.postMessage("BRclick:"+e,"https://arch.rgdb.ru"),this},bindEvents:function(){var t=this;return t.$iframe.on("load",function(){t.execAction("full").execAction("zoom_auto"),t.delay(function(){t.$container.removeClass(t.params.processingClassName).addClass("is-ready")},300)}),t.on("click",t.params.upSelector,function(e){e.preventDefault(),t.execAction("book_up")}),t.on("click",t.params.downSelector,function(e){e.preventDefault(),t.execAction("book_down")}),t.on("fullscreenchange msfullscreenchange mozfullscreenchange webkitfullscreenchange",t.params.playerSelector,function(){t.delay(function(){t.execAction("zoom_auto")},300)}),t.bind("resize",t.$WINDOW,function(e){e.preventDefault(),t.execAction("zoom_auto")}),t},init:function(){var e=this;return e.iframe=e.$iframe.get(0),e.$container.addClass(e.params.processingClassName),e}}),n.fn.diafilm=function(a){return this.each(function(e,t){n.data(this,"diafilm",new r(t,a))})}}(jQuery),function(i){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=i.extend(!0,{},i.depotProto,{pluginName:"earth",defaults:{playerSelector:".js-earth-player",hintSelector:".js-earth-hint",readyClassName:"is-ready",carouselSelector:".js-carousel-earth",carouselOverflowSelector:".js-carousel-overflow",itemsTemplate:'#{for item in items}<li class="carousel__item carousel__item_default js-carousel-item">${itemTemplate}</li>#{endfor}',itemTemplate:'<article class="card card_earth" data-clickable><div class="card__picture"><img class="card__image" src="${item.image.x1}" srcset="${item.image.x2} 2x" width="${item.image.width}" height="${item.image.height}" intrinsicsize="${item.image.width}x${item.image.height}" loading="lazy" alt=""></div><div class="card__body"><div class="card__label" role="heading" aria-level="4"><a class="card__link" href="${item.url}">${item.label}</a></div><div class="card__params params params_card"><div class="params__year">${item.year}</div><div class="params__age">${item.age}</div>#{for param in item.params}<div class="params__item">#{if param.label}${param.label}#{endif} #{if param.value}<strong>${param.value}</strong>#{endif}</div>#{endfor}</div></div></article>',errorClassName:"is-error",pointerClassName:"is-pointer",popupClassName:"has-popup",normalMaterial:{color:3781962,transparent:!0,opacity:.8},activeMaterial:{color:2596917,transparent:!0,opacity:1}},getInitialState:function(){return this.cleanObject({fontLoaded:!1,textureLoaded:!1,inited:!1,ready:!1,rotate:!0,pointPk:"",childPk:"",hintTransform:null,pointer:{active:!1,down:null,x:0,y:0}})},convertCoordinatesToPosition:function(e,t){var e=e.split(/[, ]+/).map(function(e){return parseFloat(e)}),a=e[0],e=e[1],a=(90-a)*(Math.PI/180),e=(e+180)*(Math.PI/180);return{x:-(t*Math.sin(a)*Math.cos(e)),z:t*Math.sin(a)*Math.sin(e),y:t*Math.cos(a)}},loadJSON:function(n,e,t){var r=this;r.state.request&&r.state.request.abort(),"function"===r.getType(e)&&"undefined"===r.getType(t)&&(t=e,e=null),r.state.request=i.ajax({url:n,type:"GET",dataType:"json",data:e,success:function(e){e&&e.success?r.call(t,e.items):(r.$container.removeClass(r.params.processingClassName),r.$container.addClass(r.params.errorClassName),r.error({action:"Earth.loadJSON",data:{url:n,response:e},name:"Unexpected Response",message:"Неожиданный ответ сервера"}))},error:function(e,t,a){r.$container.removeClass(r.params.processingClassName),r.$container.addClass(r.params.errorClassName),r.error({action:"Earth.loadJSON",data:{url:n},name:t,number:e.status,message:a})}})},getTextureURL:function(){return Modernizr&&Modernizr.webp?"/static/core/img/foyer/earth/map.webp":"/static/core/img/foyer/earth/map.png"},animateMaterial:function(i,e){var t=window.THREE,s=i.opacity,o=new t.Color(i.color.getHex()),l=e.opacity?e.opacity-s:0,c=e.color?{r:(t=(new t.Color).setHex(e.color)).r-o.r,g:t.g-o.g,b:t.b-o.b}:null;return this.animate(250,function(e,t){var a,n,r;c&&(a=o.r+c.r*t,n=o.g+c.g*t,r=o.b+c.b*t,i.color.setRGB(a,n,r)),l&&(i.opacity=s+l*t)}),this},inViewport:function(){var e=this,t=e.$container.offset(),a=t.top,t=t.left,n=t+e.$container.outerWidth(),r=a+e.$container.outerHeight(),i=e.$WINDOW.scrollTop(),s=e.$WINDOW.scrollLeft(),o=i+e.$WINDOW.innerWidth(),l=i+e.$WINDOW.innerHeight(),a=(a<i&&i<=r&&r<=l||i<=a&&r<=l||i<=a&&a<=l&&l<=r||a<=i&&l<=r)&&(t<o&&s<=n&&n<=o||o<=t&&n<=o||o<=t&&t<=o&&o<=n||t<=o&&o<=n),i=e.$container.outerWidth()&&e.$container.outerHeight();return a&&i},getIntersectsAt:function(e,t){var a=this,e=e/a.cache.player.clientWidth*2-1,t=2*-(t/a.cache.player.clientHeight)+1;return a.THREE.pointer.x=e,a.THREE.pointer.y=t,a.THREE.raycaster.setFromCamera(a.THREE.pointer,a.THREE.camera),a.THREE.raycaster.intersectObjects(a.THREE.interactive.filter(function(e){return e.parent.visible}))},processPoints:function(e){return e.map(function(t){return t.parentPk="",t.children&&t.children.length&&(t.children=t.children.map(function(e){return e.parentPk=t.pk,e})),t}),e},createPoint:function(e,t){var a=this,n=window.THREE,r=new n.Group,i=Boolean(e.children&&e.children.length),t=(r.name=e.label,r.userData=e,r.renderOrder=t,a.convertCoordinatesToPosition(e.coordinates,1.001*a.cache.radius)),t=(r.position.x=t.x,r.position.y=t.y,r.position.z=t.z,a.convertCoordinatesToPosition(e.coordinates,2*a.cache.radius)),t=(r.lookAt(t.x,t.y,t.z),i?.04*a.cache.radius:.025*a.cache.radius),i=new n.CircleGeometry(t,64),s=new n.MeshBasicMaterial(a.params.normalMaterial),i=(s.color.setHex(a.params.normalMaterial.color),new n.Mesh(i,s));return i.name="fill",r.add(i),a.THREE.interactive.push(i),e.quantity&&(s=new n.TextGeometry(e.quantity.toString(),{font:a.cache.font,size:.75*t,height:1}),(i=new n.MeshBasicMaterial({color:16777215})).color.convertSRGBToLinear(),(e=new n.Mesh(s,i)).name="text",s.computeBoundingBox(),e.position.x=-.5*(s.boundingBox.max.x-s.boundingBox.min.x),e.position.y=-.5*(s.boundingBox.max.y-s.boundingBox.min.y),e.position.z=-.5*(s.boundingBox.max.z-s.boundingBox.min.z),r.add(e)),r},createPoints:function(){var n=this,e=n.processPoints(n.cache.points),r=0;return i.each(e,function(e,t){r+=1;var a=n.createPoint(t,r);n.THREE.points.add(a),i.each(t.children,function(e,t){r+=1;t=n.createPoint(t,r);t.visible=!1,n.THREE.points.add(t)})}),n.THREE.world.add(n.THREE.points),n},collectAssets:function(){var a=this;return a.state.inited=!0,a.addScripts([{src:"/static/vendor/three/three.min.js",exports:"THREE",plugins:[{src:"/static/vendor/three/OrbitControls.min.js",exports:"THREE.OrbitControls"}]}],function(e){var t=window.THREE;a.THREE=a.cleanObject(),a.THREE.textureLoader=new t.TextureLoader,a.THREE.fontLoader=new t.FontLoader,a.THREE.textureLoader.load(a.getTextureURL(),function(e){a.state.textureLoaded=!0,a.cache.texture=e,a.initPlayer()}),a.THREE.fontLoader.load("/static/core/fonts/Proxima-Nova_Regular.json",function(e){a.state.fontLoaded=!0,a.cache.font=e,a.initPlayer()}),a.$container.addClass(a.params.processingClassName),a.loadJSON(a.$container.data("points"),function(e){a.state.pointsLoaded=!0,a.cache.points=e,a.initPlayer()})}),a},initPlayer:function(){var e,t,a=this,n=window.THREE;return a.state.textureLoaded&&a.state.fontLoaded&&a.state.pointsLoaded&&(a.cache.radius=1e3,a.cache.player=a.$player.get(0),e=new n.Color,a.params.normalMaterial.color=e.setHex(a.params.normalMaterial.color).convertSRGBToLinear().getHex(),a.params.activeMaterial.color=e.setHex(a.params.activeMaterial.color).convertSRGBToLinear().getHex(),a.THREE.interactive=[],a.THREE.raycaster=new n.Raycaster,a.THREE.pointer=new n.Vector2(0,0),a.THREE.scene=new n.Scene,a.THREE.world=new n.Group,a.THREE.world.rotation.y=Math.PI/4*3,a.THREE.points=new n.Group,a.THREE.points.name="Points",a.THREE.camera=new n.PerspectiveCamera(50,a.cache.player.clientWidth/a.cache.player.clientHeight,a.cache.radius/10,10*a.cache.radius),a.THREE.camera.position.z=2.5*a.cache.radius,a.THREE.renderer=new n.WebGLRenderer({alpha:!0,antialias:!0,powerPreference:"high-performance"}),a.THREE.renderer.outputEncoding=n.sRGBEncoding,a.THREE.renderer.shadowMap.enabled=!1,a.THREE.renderer.shadowMap.autoUpdate=!1,a.THREE.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.THREE.renderer.setSize(a.cache.player.clientWidth,a.cache.player.clientHeight),a.THREE.controls=new n.OrbitControls(a.THREE.camera,a.cache.player),a.THREE.controls.enablePan=!1,a.THREE.controls.enableZoom=!1,a.THREE.controls.minPolarAngle=Math.PI/6,a.THREE.controls.maxPolarAngle=Math.PI/6*5,a.THREE.controls.rotateSpeed=.75,a.THREE.controls.enableDamping=!0,a.THREE.controls.dampingFactor=.05,e=new n.SphereGeometry(a.cache.radius,256,128),a.cache.texture.encoding=n.sRGBEncoding,a.cache.texture.anisotropy=a.THREE.renderer.capabilities.getMaxAnisotropy(),t=new n.MeshBasicMaterial({map:a.cache.texture}),a.THREE.earth=new n.Mesh(e,t),a.THREE.earth.name="Earth",a.THREE.world.add(a.THREE.earth),a.THREE.scene.add(a.THREE.world),a.THREE.scene.add(a.THREE.camera),a.createPoints(),a.$player.append(a.THREE.renderer.domElement),a.THREE.renderer.setAnimationLoop(function(){a.render()}),a.$container.removeClass(a.params.processingClassName),a.$container.addClass(a.params.readyClassName),a.state.ready=!0),a},checkIntersects:function(e){return e.length?(e=e[0].object.parent,this.select(e.userData)):this.deselect(),this},select:function(e){var t=this;return t.state.rotate=!1,t.state.pointPk=e.parentPk||e.pk,t.state.childPk=e.pk,t.update(),t},deselect:function(){var e=this;return e.state.rotate=!0,e.state.pointPk="",e.state.childPk="",e.update(),e},update:function(){var s=this,o=!1;return i.each(s.THREE.points.children,function(e,t){var a=t.userData,n=t.children.filter(function(e){return"fill"===e.name})[0],r=Boolean(a.children&&!!a.children.length),i=!r&&!a.parentPk;!s.state.pointPk||a.pk!==s.state.pointPk&&a.parentPk!==s.state.pointPk?(t.visible=r||i,n.material.color.getHex()===s.params.activeMaterial.color&&s.animateMaterial(n.material,s.params.normalMaterial)):(t.visible=!r,s.state.childPk&&(a.pk===s.state.childPk?(o=!0,s.animateMaterial(n.material,s.params.activeMaterial),s.$carousel.parent().addClass(s.params.processingClassName),s.loadJSON(s.$container.data("cards"),{pk:a.pk},function(e){s.cache.items=e,s.renderCarousel()})):n.material.color.getHex()===s.params.activeMaterial.color&&s.animateMaterial(n.material,s.params.normalMaterial)))}),o||(s.cache.items=null,s.$container.removeClass(s.params.popupClassName),s.$carousel.removeClass(s.params.visibleClassName)),s},resize:function(){var e=this;return e.state.ready&&(e.THREE.camera.aspect=e.cache.player.clientWidth/e.cache.player.clientHeight,e.THREE.camera.updateProjectionMatrix(),e.THREE.renderer.setSize(e.cache.player.clientWidth,e.cache.player.clientHeight),e.render()),e},render:function(){var r=this;return r.state.ready&&(r.state.rotate&&!r.state.pointer.active&&(r.THREE.world.rotation.y+=.001),r.THREE.controls.update(),r.THREE.renderer.render(r.THREE.scene,r.THREE.camera),r.state.pointer.active&&r.throttle("hint",function(){var e,t,a,n=r.getIntersectsAt(r.state.pointer.x,r.state.pointer.y);n.length?(n=n[0].object.parent,e=r.state.pointer.x>r.cache.player.clientWidth/2,e={x:r.state.pointer.x+(e?-16:16),y:r.state.pointer.y,invert:e},t=r.state.hintTransform,a=e,JSON.stringify(t)!==JSON.stringify(a)&&(t=r.prefixed({transform:r.format("translate3d(${x}px, ${y}px, 0)#{if invert} translateX(-100%)#{endif}",e)}),r.$hint.css(t).text(n.userData.label),r.$container.addClass(r.params.pointerClassName),r.state.hintTransform=e)):r.$container.removeClass(r.params.pointerClassName)},100)),r},renderCarousel:function(){var e,t=this;return t.cache.items&&(e=t.cleanObject(t.params,{items:t.cache.items}),e=t.format(t.params.itemsTemplate,e),t.$carouselOverflow.html(e),t.$carousel.trigger("update"),t.$container.addClass(t.params.popupClassName),t.$carousel.addClass(t.params.visibleClassName)),t.$carousel.parent().removeClass(t.params.processingClassName),t},bindEvents:function(){var n=this;return n.bind("load",n.$WINDOW,function(e){n.throttle(e.type,function(){n.delay(function(){n.inViewport()&&!n.state.inited&&(n.unbind("scroll load",n.$WINDOW),n.collectAssets())})})}),n.bind("scroll",n.$WINDOW,function(e){n.throttle(e.type,function(){n.inViewport()&&!n.state.inited&&(n.unbind("scroll load",n.$WINDOW),n.collectAssets())})}),n.bind("resize orientationchange",n.$WINDOW,n.resize.bind(n)),n.on("mouseenter",n.params.playerSelector,function(){n.state.pointer.active=!0}),n.on("mouseleave",n.params.playerSelector,function(){n.state.pointer.active=!1}),n.on("pointerdown MSPointerDown",n.params.playerSelector,function(e){n.state.pointer.down={x:e.offsetX,y:e.offsetY}}),n.on("mousemove",n.params.playerSelector,function(e){n.state.pointer.active=!0,n.state.pointer.x=e.offsetX,n.state.pointer.y=e.offsetY}),n.on("pointerup MSPointerup",n.params.playerSelector,function(e){var t,a;n.state.ready&&n.state.pointer.down&&(t=Math.abs(n.state.pointer.down.x-e.offsetX),a=Math.abs(n.state.pointer.down.y-e.offsetY),n.state.pointer.down=null,t<=30&&a<=a&&n.checkIntersects(n.getIntersectsAt(e.offsetX,e.offsetY)))}),n},init:function(){this.$container.addClass(this.params.processingClassName),this.inViewport()&&this.collectAssets()}}),i.fn.earth=function(a){return this.each(function(e,t){i.data(this,"earth",new n(t,a))})}}(jQuery),function(l){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=l.extend(!0,{},l.depotProto,{pluginName:"elevator",defaults:{nameSelector:".js-elevator-name",numberSelector:".js-elevator-number",viewportSelector:".js-elevator-viewport",navigationSelector:".js-elevator-navigation",closeSelector:".js-elevator-close",toggleSelector:".js-elevator-toggle",levelsSelector:".js-elevator-level",shortcutSelector:".js-elevator-shortcut",caretSelector:".js-elevator-caret",floorsSelector:".js-elevator-floor",dataParam:"id",duration:250,animationEnabled:!0,mediaQueries:null},getInitialState:function(){var t=this,e=t.matchMedia(t.params.mediaQueries,function(e){t.state.animationEnabled=e&&e.animationEnabled||t.params.animationEnabled}),e=e&&e.animationEnabled||t.params.animationEnabled;return t.cleanObject({busy:!1,floorIndex:0,animationEnabled:e})},getFloorIndex:function(a){var e,n=this;return 0<(e=void 0!==a?n.$floors.filter(function(e,t){return l(t).data(n.params.dataParam).toString()===a}).index():e)?e:0},goTo:function(e,t){var a,n,r,i,s,o=this;return o.state.busy||(o.state.busy=!0,o.$levels.removeClass(o.params.activeClassName),o.$floors.removeClass(o.params.activeClassName),s=o.$levels.eq(e),r=o.$floors.eq(e),s.addClass(o.params.activeClassName),r.addClass(o.params.activeClassName),o.$number.text(e+1),o.$name.text(s.text().trim()),a=r.data(o.params.dataParam),s=r.outerHeight(),n=o.state.floorIndex*s,i=(r=e*s)-n,s=function(){o.state.busy=!1,o.state.floorIndex=e,l.depotHash.set(a),o.$WINDOW.trigger("update")},o.$container.attr("data-id",a),o.state.animationEnabled?t?(o.$caret.css(o.prefixed({transform:"translate3d(0,"+r+"px,0)"})),o.call(s)):(t=Math.abs(e-o.state.floorIndex)*o.params.duration,o.animate(t,function(e,t){o.$caret.css(o.prefixed({transform:"translate3d(0,"+(n+i*t)+"px,0)"}))},{done:s})):o.call(s)),o},bindEvents:function(){var a=this;return a.on("click",a.params.levelsSelector,function(e){var t=l(this);e.preventDefault(),a.$navigation.removeClass(a.params.visibleClassName),a.$viewport.addClass(a.params.visibleClassName),a.throttle("goTo",function(){a.goTo(t.index())})}),a.on("click",a.params.toggleSelector,function(e){e.preventDefault(),a.$navigation.toggleClass(a.params.visibleClassName),a.$viewport.toggleClass(a.params.visibleClassName)}),a.on("click",a.params.closeSelector,function(e){e.preventDefault(),a.$navigation.removeClass(a.params.visibleClassName),a.$viewport.addClass(a.params.visibleClassName)}),a.bind("resize",a.$WINDOW,function(){a.goTo(a.state.floorIndex,!0)}),a},init:function(){var e=0,t=l.depotHash.get();return t&&(e=this.getFloorIndex(t)||e),this.goTo(e,!0),this}}),l.fn.elevator=function(a){return this.each(function(e,t){l.data(this,"elevator",new n(t,a))})}}(jQuery),function(t){"use strict";var a={formCSRF:{onInit:null}};t.formCSRFMixin={initFormCSRF:function(){var e=this;e.params=t.extend(!0,{},e.translate(a),e.params),e.params.requestHeaders=e.params.requestHeaders.concat({name:"X-CSRFToken",value:t.depotStorage.getItem("csrftoken","cookie")}),e.call(e.params.formCSRF.onInit)}}}(jQuery),function(n){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=n.extend(!0,{},n.depotProto,{pluginName:"formFieldFile",defaults:{labelSelector:".js-form-field-label",valueSelector:".js-form-field-value",elementSelector:".js-form-field-element",valueTemplate:'#{if hasFiles}<div class="field__list">#{for file in files}<div class="field__item"><span>${file.name|escapeHTML}</span> (${file.size})</div>#{endfor}</div>#{endif}',dictionary:{units:{b:{ru:"б",en:"b"},kb:{ru:"Кб",en:"Kb"},mb:{ru:"Мб",en:"Mb"}}}},getInitialState:function(){return{hasFiles:!1,files:[]}},render:function(){var e=this,t=e.format(e.params.valueTemplate,e.state);return e.$value.html(t),e},toFileSize:function(e){for(var t=0,a=["b","kb","mb"];1e3<=e&&t<a.length-1;)e/=1e3,++t;return this.format("${size|fixed(1, false)|digit}_{units.${unit}}",{unit:a[t],size:e})},update:function(){var e=this,t=[],a=e.$element.get(0).files,n=a&&a.length||0;if(n){e.$container.addClass(e.params.busyClassName);for(var r=0;r<n;r+=1){var i=a.item(r);t.push({name:i.name,size:e.toFileSize(i.size)})}}return e.state.hasFiles=0<n,e.state.files=t,e.render(),e},bindEvents:function(){var t=this;return t.on("input change reset",t.params.elementSelector,function(e){t.update()}),t},init:function(){return this.call(this.params.onInit),this}}),n.fn.formFieldFile=function(a){return n(this).each(function(e,t){n.data(this,"formFieldFile",new r(t,a))})}}(jQuery),function(s){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=s.extend(!0,{},s.depotProto,{pluginName:"formFieldSelect",defaults:{labelSelector:".js-form-field-label",valueSelector:".js-form-field-value",elementSelector:".js-form-field-element",valueTemplate:"#{for item in selected}#{if item.icon}#{endif}${item.text}#{if !loop.isLast}, #{endif}#{endfor}",dropDown:{template:'<div class="field__dropdown ${dropDown.selector|substr(1)}">${dropDown.listTemplate}#{if isMultiple}${dropDown.actionsTemplate}#{endif}</div>',listTemplate:'<ul class="field__list" id="${id}" role="listbox" aria-multiselectable="${isMultiple}" aria-orientation="vertical">${dropDown.listItemsTemplate}</ul>',listItemsTemplate:'#{for item in items}<li class="field__item ${dropDown.itemSelector|substr(1)}" data-icon="${item.icon}" data-value="${item.value}" role="option" aria-selected="${item.selected}" aria-disabled="${item.disabled}" tabindex="0">${item.text}</li>#{endfor}',actionsTemplate:'<div class="field__actions">${dropDown.buttonApplyTemplate}${dropDown.buttonResetTemplate}</div>',buttonApplyTemplate:'<button class="field__button field__button_apply ${dropDown.applySelector|substr(1)}" type="button">_{buttons.apply}</button>',buttonResetTemplate:'<button class="field__button field__button_reset ${dropDown.resetSelector|substr(1)}" type="button">_{buttons.reset}</button>',selectedClassName:"is-selected",selector:".js-form-field-dropdown",itemSelector:".js-form-field-item",applySelector:".js-form-field-apply",resetSelector:".js-form-field-reset",mediaQuery:"(min-width: 740px)"},dictionary:{buttons:{apply:{ru:"Применить",en:"Apply"},reset:{ru:"Сбросить",en:"Reset"}}},nullValue:"",onChangeSubmit:!1,onChange:null},isMultiple:function(){return this.$element.prop("multiple")},isDisabled:function(){return this.$element.prop("disabled")},getItemData:function(e){var t=s(e),e={text:e.textContent.trim(),value:t.data("value")||"",icon:t.data("icon")||"",selected:"true"===t.aria("selected"),disabled:"true"===t.aria("disabled")};return e.hash=this.hashify(e,12),e},getOptionData:function(e){e={text:e.textContent.trim(),value:e.value,icon:s(e).data("icon")||"",selected:e.selected,disabled:e.disabled};return e.hash=this.hashify(e,12),e},getSelectData:function(){var a=this,n={items:[],selected:[]};return a.$element.find("option").each(function(e,t){t=a.getOptionData(t);n.items=n.items.concat(t),t.selected&&(n.selected=n.selected.concat(t))}),n.selected.length||(n.selected=n.selected.concat(n.items[0])),n.hash=a.hashify(n,12),n},getDropDownData:function(){var a=this,n={items:[],selected:[]};return a.$dropDown.find(a.params.dropDown.itemSelector).each(function(e,t){t=a.getItemData(t);n.items=n.items.concat(t),t.selected&&(n.selected=n.selected.concat(t))}),n.selected.length||(n.selected=n.selected.concat(n.items[0])),n.hash=a.hashify(n,12),n},updateValue:function(){var e=this;return e.$value.html(e.format(e.params.valueTemplate,e.state.data)),e},updateTabindex:function(){var e=this;return e.state.mediaQuery.matches?(e.$element.attr("tabindex","-1"),e.$value.attr("tabindex","0")):(e.$element.attr("tabindex","0"),e.$value.attr("tabindex","-1")),e},updateState:function(){var e=this,t=e.getSelectData();return e.state.data.hash!==t.hash&&(e.state.data=t,e.updateValue()),e},update:function(){var r,i=this,e=i.getDropDownData();return e.hash!==i.state.data.hash&&(r=i.$element.find("option"),s.each(e.items,function(e,t){var a=i.state.data.items[e],n=r.eq(e);t.hash!==a.hash&&(i.state.data.items[e]=t,n.prop("disabled",t.disabled),n.prop("selected",t.selected))}),i.$element.trigger("change"),i.$element.trigger("focusout")),i},buildDropDown:function(){var e=this,t=(e.$dropDown&&e.$dropDown.remove(),s.extend({id:e.eventNameSpace.substr(1),isMultiple:e.isMultiple(),dropDown:e.params.dropDown},e.state.data)),a=e.format(e.params.dropDown.template,t),a=s(a);return e.$value.aria("controls",t.id),e.$container.append(a),a},expandDropDown:function(){var t=this;return t.state.isExpanded=!0,t.$dropDown=t.buildDropDown(),t.delay(function(){var e=t.$dropDown.find(t.params.dropDown.itemSelector+'[aria-selected="true"]').first();t.$container.addClass(t.params.activeClassName),t.$value.aria("expanded","true"),t.$dropDown.aria("hidden","false"),e.length&&e.focus(),t.$BODY.on(t.addEventNS("click",".kickoff"),function(e){t.state.isExpanded&&!s(e.target).closest(t.params.dropDown.selector).length&&t.collapseDropDown()}),t.call(t.params.onExpand)}),t},collapseDropDown:function(e){var t=this;return t.state.isExpanded=!1,t.$container.removeClass(t.params.activeClassName),t.$value.aria("expanded","false"),t.$dropDown.aria("hidden","true"),t.$BODY.off(t.addEventNS("click",".kickoff")),e||t.update(),t.$value.focus(),t.call(t.params.onCollapse,e),t},toggleDropDown:function(){return this.state.isExpanded?this.collapseDropDown():this.expandDropDown(),this},toggleItem:function(e,t){var a=this,n=a.$dropDown.find(a.params.dropDown.itemSelector+'[data-value="'+a.params.nullValue+'"]'),r="true"===e.aria("selected");return"true"!==e.aria("disabled")&&(e.data("value")!==a.params.nullValue?a.isMultiple()?r?(e.aria("selected","false"),a.$dropDown.find(a.params.dropDown.itemSelector+'[aria-selected="true"]').length||n.aria("selected","true").focus()):(e.aria("selected","true").focus(),n.aria("selected","false")):(e.aria("selected","true").focus(),e.siblings().aria("selected","false")):(n.aria("selected","true").focus(),n.siblings().aria("selected","false"))),a.isMultiple()&&!t||a.collapseDropDown(),a},updateAll:function(){return this.updateState(),this.buildDropDown(),this},reset:function(e){var t=this;return e&&e.stopPropagation(),t.$element.html(t.state.initialHTML),t.delay(function(){t.$element.trigger("clear"),t.updateState()},10),t},bindEvents:function(){var n=this;return n.bind("resize",n.$WINDOW,n.updateTabindex.bind(n)),n.on("reset",n.params.elementSelector,n.reset.bind(n)),n.on("update",n.params.elementSelector,n.updateAll.bind(n)),n.on("change",n.params.elementSelector,function(e){n.updateState(),n.call(n.params.onChange),n.params.onChangeSubmit&&n.$container.closest("form").trigger("submit")}),n.on("click",n.params.labelSelector,function(e){n.state.mediaQuery.matches&&!n.isDisabled()&&(e.preventDefault(),e.stopPropagation(),n.toggleDropDown())}),n.on("click",n.params.valueSelector,function(e){n.state.mediaQuery.matches&&!n.isDisabled()&&(e.preventDefault(),e.stopPropagation(),n.toggleDropDown())}),n.on("keyup",n.params.valueSelector,function(e){!n.state.mediaQuery.matches||n.state.isExpanded||n.isDisabled()||(e.keyCode!==n.KEYS.ARROW_DOWN&&e.keyCode!==n.KEYS.ARROW_UP||(e.preventDefault(),n.expandDropDown()),e.keyCode===n.KEYS.ESCAPE&&(e.preventDefault(),e.stopPropagation(),n.collapseDropDown(!0)))}),n.on("keydown",n.params.valueSelector,function(e){!n.state.mediaQuery.matches||e.keyCode!==n.KEYS.SPACE&&e.keyCode!==n.KEYS.ENTER&&e.keyCode!==n.KEYS.ARROW_DOWN||(e.preventDefault(),n.state.isExpanded||n.expandDropDown())}),n.on("transitionend",n.params.dropDown.selector,function(e){n.$dropDown.find(n.params.dropDown.itemSelector+'[aria-selected="true"]').first().focus()}),n.on("keydown",n.params.dropDown.selector,function(e){var t,a=n.$dropDown.find(n.params.dropDown.itemSelector+":focus");e.keyCode!==n.KEYS.TAB&&e.keyCode!==n.KEYS.ARROW_DOWN&&e.keyCode!==n.KEYS.ARROW_UP||(e.preventDefault(),e.keyCode===n.KEYS.ARROW_DOWN||!e.shiftKey&&e.keyCode===n.KEYS.TAB?(t=(t=a.next()).length?t:n.$dropDown.find(n.params.dropDown.itemSelector).first()).focus():(e.keyCode===n.KEYS.ARROW_UP||e.shiftKey&&e.keyCode===n.KEYS.TAB)&&(t=(t=a.prev()).length?t:n.$dropDown.find(n.params.dropDown.itemSelector).last()).focus()),e.keyCode===n.KEYS.SPACE&&(e.preventDefault(),n.toggleItem(a)),e.keyCode===n.KEYS.ENTER&&(e.preventDefault(),n.toggleItem(a),n.collapseDropDown()),e.keyCode===n.KEYS.ESCAPE&&(e.preventDefault(),e.stopPropagation(),n.collapseDropDown(!0))}),n.on("click",n.params.dropDown.applySelector,function(e){e.preventDefault(),n.collapseDropDown()}),n.on("click",n.params.dropDown.resetSelector,function(e){e.preventDefault(),n.collapseDropDown(!0)}),n.on("click",n.params.dropDown.itemSelector,function(e){e.preventDefault(),n.toggleItem(s(this))}),n},getInitialState:function(){return{data:{items:[],selected:[]},mediaQuery:window.matchMedia(this.params.dropDown.mediaQuery),initialHTML:this.$element.html(),isDisabled:this.isDisabled()}},init:function(){var e=this;return e.updateState(),e.updateTabindex(),e.call(e.params.onInit),e}}),s.fn.formFieldSelect=function(a){return s(this).each(function(e,t){s.data(this,"formFieldSelect",new n(t,a))})}}(jQuery),function(n){"use strict";var t={formMessage:{formBodySelector:".js-form-body",formMessageSelector:".js-form-message",formMessageBodySelector:".js-form-message-body",formMessageTitleSelector:".js-form-message-title",formMessageTextSelector:".js-form-message-text",formMessageCloseSelector:".js-form-message-close",successTimeout:1e4,errorTimeout:1e4,timeout:1e4,onInit:null,onShow:null,onHide:null}};n.formMessageMixin={showFormMessage:function(e,t){var a=this;return a.state.formMessage.isVisible||(a.state.formMessage.isVisible=!0,e&&(a.$formMessageTitle.html(e.title||""),a.$formMessageText.html(e.body||"")),a.$formMessage.aria("hidden","false"),a.$formBody.length&&a.$formBody.aria("hidden","true"),!0===e.success?a.$formMessageBody.attr("data-success","true"):!1===e.success?a.$formMessageBody.attr("data-success","false"):a.$formMessageBody.removeAttr("data-success"),(t=void 0===t?!0===e.success?a.params.formMessage.successTimeout:!1===e.success?a.params.formMessage.errorTimeout:a.params.formMessage.timeout:t)&&(a.state.formMessage.hideTimeout&&a.cancelDelay(a.state.formMessage.hideTimeout),"number"==typeof t&&(a.$formMessageBody.attr("data-autohide","true"),a.$formMessageBody.get(0).style.setProperty("--autohide-delay",t+"ms"),a.state.formMessage.hideTimeout=a.delay(function(){a.hideFormMessage(!0)},t),a.$BODY.on(a.addEventNS("click",".message:click"),function(e){a.state.formMessage.isVisible&&n(e.target).closest("body").length&&!n(e.target).closest(a.params.formMessage.formMessageBodySelector).length&&a.hideFormMessage()}))),a.call(a.params.formMessage.onShow,e)),a},hideFormMessage:function(e){var t=this;return(t.state.formMessage.isVisible||e)&&(t.state.formMessage.isVisible=!1,t.$formMessage.aria("hidden","true"),t.$formMessageBody.removeAttr("data-success"),t.$formMessageTitle.empty(),t.$formMessageText.empty(),t.$formBody.length&&t.$formBody.aria("hidden","false"),t.$BODY.off(t.addEventNS("click",".message:click")),t.call(t.params.formMessage.onHide)),t},bindFormMessageEvents:function(){var n=this;return n.on("click",n.params.formMessage.formMessageCloseSelector,function(e){e.preventDefault(),n.hideFormMessage()}),n.on("message:show",function(e,t,a){n.showFormMessage(t||e.message,a||e.timeout)}),n.on("message:hide",function(e,t){n.hideFormMessage(t||e.force)}),n.$BODY.on(n.addEventNS("keyup",".message:key"),function(e){n.state.formMessage.isVisible&&e.which===n.KEYS.ESCAPE&&(e.preventDefault(),n.hideFormMessage())}),n},initFormMessage:function(){var e=this;e.getInitialState=e.proxyCallback(e.getInitialState,function(){return n.extend(!0,{},this,{formMessage:{isVisible:!1}})}),e.params=n.extend(!0,{},e.translate(t),e.params),e.getElements(e.params.formMessage),e.state=e.getInitialState(),e.params.onReset=e.proxyCallback(e.params.onReset,function(){return e.hideFormMessage(!0)}),e.bindFormMessageEvents(),e.call(e.params.formMessage.onInit)}}}(jQuery),function(t){"use strict";var e={formResponse:{message:{success:!0,error:!0},reset:!0,onInit:null,onSuccess:null,onError:null}};t.formResponseMixin={initFormResponse:function(){var n=this;n.getInitialState=n.proxyCallback(n.getInitialState,function(){return t.extend(!0,{},this,{formResponse:{}})}),n.params=t.extend(!0,{},n.translate(e),n.params),n.getElements(n.params.formResponse),n.state=n.getInitialState(),n.params.onSubmit=n.proxyCallback(n.params.onSubmit,function(e){e&&(!0===e.success?(n.call(n.params.formResponse.onSuccess,e),n.params.formResponse.message.success&&e.body&&n.call(n.showFormMessage,e),n.params.formResponse.reset&&n.reset(),e.redirect_url&&(window.location=e.redirect_url)):!1===e.success&&e.errors?(n.call(n.params.formResponse.onError,e),t.each(e.errors,function(e,t){"__all__"===e?n.params.formResponse.message.error&&n.call(n.showFormMessage,{success:!1,title:t[0]}):n.setExternalErrorFor(n.container[e],t[0])})):!1===e.success?(n.deleteFormData(),n.call(n.params.formResponse.onError,e),n.params.formResponse.message.error&&n.call(n.showFormMessage,e)):(n.deleteFormData(),n.call(n.params.formResponse.onError,e),n.error({action:"depotForm.onSubmit",data:{response:e},name:"UnexpectedError",message:"Неожиданный ответ сервера"})))}),n.params.onError=n.proxyCallback(n.params.onError,function(e,t,a){return n.call(n.showFormMessage,{title:t,body:a},1e4),n}),n.call(n.params.formResponse.onInit)}}}(jQuery),function(t){"use strict";var a={fullscreen:{requestFullscreenSelector:".js-request-fullscreen",exitFullscreenSelector:".js-exit-fullscreen",onInit:null,onRequest:null,onExit:null}};t.fullscreenMixin={fullscreenElement:function(){return document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},requestFullscreen:function(e,t){return(e=e||this.container).requestFullscreen?e.requestFullscreen(t):e.msRequestFullScreen?e.msRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen(t):!!e.webkitRequestFullScreen&&e.webkitRequestFullScreen()},exitFullscreen:function(){return document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():void 0},bindFullscreenEvents:function(){var t=this;return t.on("click",t.params.fullscreen.requestFullscreenSelector,function(e){e.preventDefault(),t.fullscreenElement()||(t.requestFullscreen(t.$player.get(0),{navigationUI:"hide"}),t.call(t.params.fullscreen.onRequest))}),t.on("click",t.params.fullscreen.exitFullscreenSelector,function(e){e.preventDefault(),t.fullscreenElement()&&(t.exitFullscreen(),t.call(t.params.fullscreen.onExit))}),t},initFullscreen:function(){var e=this;e.state.fullscreen={},e.cache.fullscreen={},e.params=t.extend(!0,{},a,e.params),e.bindFullscreenEvents(),e.call(e.params.fullscreen.onInit)}}}(jQuery),function(n){"use strict";var e={dictionary:{buttons:{backwards:{ru:"Назад",en:"Backwards"},forwards:{ru:"Вперед",en:"Forwards"}}},galleryNavigation:{template:"${buttonsTemplate}${bulletsTemplate}",buttonsTemplate:'#{if buttonsEnabled}<div class="gallery__buttons">${buttonBackwardsTemplate}${buttonForwardsTemplate}</div>#{endif}',buttonBackwardsTemplate:'<button class="gallery__button gallery__button_backwards ${backwardsSelector|substr(1)}" type="button" aria-label="_{buttons.backwards}" title="_{buttons.backwards}"${backwardsDisabled}></button>',buttonForwardsTemplate:'<button class="gallery__button gallery__button_forwards ${forwardsSelector|substr(1)}" type="button" aria-label="_{buttons.forwards}" title="_{buttons.forwards}"${forwardsDisabled}></button>',bulletsTemplate:'#{if bulletsEnabled}<div class="gallery__bullets">#{for bullet in 1..${bulletsQuantity}}${bulletTemplate}#{endfor}</div>#{endif}',bulletTemplate:'<button class="gallery__bullet ${bulletsSelector|substr(1)}" type="button" data-index="${bullet}"></button>',backwardsSelector:".js-gallery-backwards",forwardsSelector:".js-gallery-forwards",bulletsSelector:".js-gallery-bullet",buttonsEnabled:!0,bulletsEnabled:!0,onInit:null}};n.galleryNavigationMixin={navigationRender:function(){var e=this,t=1<e.state.itemsQuantity,t=n.extend(!0,{},e.params.galleryNavigation,{buttonsEnabled:t&&e.params.galleryNavigation.buttonsEnabled,bulletsEnabled:t&&e.params.galleryNavigation.bulletsEnabled,backwardsDisabled:e.state.galleryNavigation.backwardsDisabled?" disabled":"",forwardsDisabled:e.state.galleryNavigation.forwardsDisabled?" disabled":"",bulletsQuantity:e.state.itemsQuantity}),t=e.format(e.params.galleryNavigation.template,t);return e.$viewport.after(t),e.getElements(e.params.galleryNavigation),e},navigationUpdate:function(){var e=this;return e.state.galleryNavigation.backwardsDisabled=!e.params.loop&&1===e.state.currentRealIndex,e.state.galleryNavigation.forwardsDisabled=!e.params.loop&&e.state.currentRealIndex===e.state.itemsQuantity,e.navigationBulletsUpdate(),e.navigationButtonsUpdate(),e},navigationBulletsUpdate:function(){return this.$bullets.filter('[aria-current="true"]').removeAria("current"),this.$bullets.filter('[data-index="'+this.state.currentRealIndex+'"]').aria("current","true"),this},navigationButtonsUpdate:function(){var e=this;return e.$backwards.prop("disabled",e.state.galleryNavigation.backwardsDisabled),e.$forwards.prop("disabled",e.state.galleryNavigation.forwardsDisabled),e},navigationBindEvents:function(){var a=this;return a.on("click",a.params.galleryNavigation.backwardsSelector,function(e){e.preventDefault(),a.throttle("backwards",a.goBackwards)}),a.on("click",a.params.galleryNavigation.forwardsSelector,function(e){e.preventDefault(),a.throttle("forwards",a.goForwards)}),a.on("click",a.params.galleryNavigation.bulletsSelector,function(e){e.preventDefault();var e=n(this).data("index"),t=a.getClosestDOMIndex(e);a.throttle("goTo",function(){a.goTo(t)})}),a},initGalleryNavigation:function(){var a=this;a.getInitialState=a.proxyCallback(a.getInitialState,function(){return n.extend(!0,{},this,{galleryNavigation:{backwardsDisabled:!0,forwardsDisabled:!0}})}),a.params=n.extend(!0,{},a.translate(e),a.params),a.state=a.getInitialState(),a.params.onChange=a.proxyCallback(a.params.onChange,function(e,t){t||a.navigationUpdate()}),a.navigationRender(),a.navigationUpdate(),a.navigationBindEvents(),a.call(a.params.galleryNavigation.onInit)}}}(jQuery),function(r){"use strict";var e={dictionary:{thumbs:{backwards:{ru:"Назад",en:"Backwards"},forwards:{ru:"Вперед",en:"Forwards"}}},galleryThumbs:{template:'<div class="gallery__thumbs thumbs"><div class="thumbs__viewport ${thumbsViewportSelector|substr(1)}"><ul class="thumbs__list ${thumbsListSelector|substr(1)}">#{for item in items}${thumbTemplate}#{endfor}</ul></div>${buttonBackwardsTemplate}${buttonForwardsTemplate}${bulletsTemplate}</div>',thumbTemplate:'<li class="thumbs__item ${thumbsSelector|substr(1)}" data-index="${item.index}"><img class="thumbs__image js-thumbs-image" src="${item.thumb}" alt="${item.index}">${captionTemplate}</li>',captionTemplate:'#{if captionEnabled}<div class="thumbs__caption">${item.caption}</div>#{endif}',buttonBackwardsTemplate:'#{if buttonsEnabled}<button class="thumbs__button thumbs__button_backwards ${thumbsBackwardsSelector|substr(1)}" type="button" aria-label="_{thumbs.backwards}" title="_{thumbs.backwards}" disabled></button>#{endif}',buttonForwardsTemplate:'#{if buttonsEnabled}<button class="thumbs__button thumbs__button_forwards ${thumbsForwardsSelector|substr(1)}" type="button" aria-label="_{thumbs.forwards}" title="_{thumbs.forwards}" disabled></button>#{endif}',bulletsTemplate:'#{if bulletsEnabled}<div class="thumbs__bullets">#{for bullet in 1..${bulletsQuantity}}${bulletTemplate}#{endfor}</div>#{endif}',bulletTemplate:'<button class="thumbs__bullet ${thumbsBulletsSelector|substr(1)}" type="button" data-index="${bullet}"></button>',thumbsViewportSelector:".js-thumbs-viewport",thumbsListSelector:".js-thumbs-list",thumbsSelector:".js-thumbs-item",thumbsBackwardsSelector:".js-thumbs-backwards",thumbsForwardsSelector:".js-thumbs-forwards",thumbsBulletsSelector:".js-thumbs-bullet",buttonsEnabled:!0,bulletsEnabled:!0,captionEnabled:!0,onPage:2,mediaQueries:{},onInit:null}};r.galleryThumbsMixin={thumbsRender:function(){var e=this,t=e.state.itemsQuantity>e.state.galleryThumbs.onPage,t=r.extend(!0,{},e.params.galleryThumbs,{items:e.state.items,captionTemplate:e.params.galleryThumbs.captionTemplate,captionEnabled:e.params.galleryThumbs.captionEnabled,buttonsEnabled:t&&e.params.galleryThumbs.buttonsEnabled,bulletsEnabled:t&&e.params.galleryThumbs.bulletsEnabled,bulletsQuantity:e.state.galleryThumbs.bulletsQuantity}),t=e.format(e.params.galleryThumbs.template,t);return e.$viewport.after(t),e.getElements(e.params.galleryThumbs),e},thumbsUpdate:function(){var e=this;return e.$thumbs.filter('[aria-current="true"]').removeAria("current"),e.$thumbs.filter('[data-index="'+e.state.currentRealIndex+'"]').aria("current","true"),e.state.galleryThumbs.currentBulletIndex=Math.ceil(e.state.currentRealIndex/e.state.galleryThumbs.onPage),(e.state.currentRealIndex-1>e.state.galleryThumbs.targetDOMIndex+e.state.galleryThumbs.onPage-1||e.state.currentRealIndex-1<e.state.galleryThumbs.targetDOMIndex)&&e.thumbsGoToBullet(e.state.galleryThumbs.currentBulletIndex),e},thumbsBulletsUpdate:function(){return this.$thumbsBullets.filter('[aria-current="true"]').removeAria("current"),this.$thumbsBullets.filter('[data-index="'+this.state.galleryThumbs.currentBulletIndex+'"]').aria("current","true"),this},thumbsButtonsUpdate:function(){var e=this;return e.$thumbsBackwards.prop("disabled",1===e.state.galleryThumbs.currentBulletIndex),e.$thumbsForwards.prop("disabled",e.state.galleryThumbs.currentBulletIndex===e.state.galleryThumbs.bulletsQuantity),e},thumbsOnTransitionEnd:function(){var e=this;return e.cancelDelay(e.state.galleryThumbs.transitionDelay),e.$thumbsList.removeClass(e.params.transitionClassName),e.$thumbsList.removeClass(e.params.slowTransitionClassName),e.state.galleryThumbs.isTransition=!1,e.state.galleryThumbs.preventClick=!1,e},thumbsGoTo:function(e,t){var a=this,e=a.clamp(0,e,a.state.itemsQuantity),n=(e<0||a.state.itemsQuantity<=a.state.galleryThumbs.onPage?e=0:e+a.state.galleryThumbs.onPage>a.state.itemsQuantity&&(e=a.state.itemsQuantity-a.state.galleryThumbs.onPage),a.$thumbs.eq(e)),r=a.$thumbs.eq(e).data("index");return a.state.galleryThumbs.current||(a.state.galleryThumbs.current=n.get(0),a.state.galleryThumbs.$current=n),a.state.galleryThumbs.preventClick=!t,a.state.galleryThumbs.currentDOMIndex=e,a.state.galleryThumbs.targetDOMIndex=e,a.state.galleryThumbs.currentBulletIndex=Math.ceil((r+1)/a.state.galleryThumbs.onPage),a.moveListToPositionLeft(a.$thumbsList,a.getItemPosition(n),a.state.galleryThumbs,t),a.thumbsBulletsUpdate(),a.thumbsButtonsUpdate(),a},thumbsGoForwards:function(){var e=this.state.galleryThumbs.currentDOMIndex+this.state.galleryThumbs.onPage;return this.thumbsGoTo(e)},thumbsGoBackwards:function(){var e=this.state.galleryThumbs.currentDOMIndex-this.state.galleryThumbs.onPage;return this.thumbsGoTo(e)},thumbsGoToBullet:function(e){e=(e-1)*this.state.galleryThumbs.onPage;return this.thumbsGoTo(e),this},thumbsBindEvents:function(){var n=this;return n.on("transitionend",n.params.galleryThumbs.thumbsListSelector,function(e){e.stopPropagation(),r(e.target).is(n.params.galleryThumbs.thumbsListSelector)&&n.call(n.thumbsOnTransitionEnd)}),n.on("click",n.params.galleryThumbs.thumbsBackwardsSelector,function(e){e.preventDefault(),n.throttle("thumbsBackwards",n.thumbsGoBackwards)}),n.on("click",n.params.galleryThumbs.thumbsForwardsSelector,function(e){e.preventDefault(),n.throttle("thumbsForwards",n.thumbsGoForwards)}),n.on("click",n.params.galleryThumbs.thumbsBulletsSelector,function(e){e.preventDefault();var t=r(this).data("index");n.throttle("thumbsForwards",function(){n.thumbsGoToBullet(t)})}),n.on("click",n.params.galleryThumbs.thumbsSelector,function(e){var t,a;e.preventDefault(),n.state.galleryThumbs.isTransition||n.state.galleryThumbs.preventClick||(e=(t=r(this)).data("index"),a=n.state.currentDOMIndex+e-n.state.currentRealIndex,n.throttle("goTo",function(){n.state.galleryThumbs.current=t.get(0),n.state.galleryThumbs.$current=t,n.goTo(a)}))}),n.bind("resize",n.$WINDOW,function(){n.throttle("resizeThumbs",function(){n.thumbsGoTo(n.state.galleryThumbs.targetDOMIndex,!0)},15)}),n.params.swipe&&n.hasPlugin("depotSwipe")&&n.$thumbsViewport.depotSwipe({targetSelector:n.params.galleryThumbs.thumbsListSelector,touchThreshold:n.params.swipeThreshold,mouse:!0,onStart:function(e){e.preventDefault(),n.state.galleryThumbs.preventClick=!0},onMove:function(e,t){e.preventDefault();e=n.$thumbs.eq(n.state.galleryThumbs.targetDOMIndex),e=n.getItemPosition(e),t=t.current.left-t.start.left;0!=t&&n.moveListToPositionLeft(n.$thumbsList,e+t,n.state.galleryThumbs,!0)},onEnd:function(e,t){e.preventDefault(),e.stopPropagation(),0<t.delta?n.thumbsGoBackwards():n.thumbsGoForwards()},onCancel:function(e,t){0!==t.delta?(n.state.galleryThumbs.preventClick=!0,t=n.$thumbs.eq(n.state.galleryThumbs.targetDOMIndex),n.moveListToPositionLeft(n.$thumbsList,n.getItemPosition(t),n.state.galleryThumbs)):n.state.galleryThumbs.preventClick=!1}}),n},initGalleryThumbs:function(){var a=this;a.getInitialState=a.proxyCallback(a.getInitialState,function(){var e=a.params.galleryThumbs.onPage,t=document.documentElement.clientWidth,t=(740<=t&&(e=3),1420<=t&&(e=6),Math.ceil(a.state.itemsQuantity/e));return r.extend(!0,{},this,{galleryThumbs:{$current:null,current:null,targetDOMIndex:0,currentDOMIndex:0,currentBulletIndex:0,direction:0,isTransition:!1,preventClick:!1,onPage:e,bulletsQuantity:t,transitionDelay:null}})}),a.params=r.extend(!0,{},a.translate(e),a.params),a.state=a.getInitialState(),a.params.onChange=a.proxyCallback(a.params.onChange,function(e,t){t||a.thumbsUpdate()}),a.thumbsRender(),a.thumbsGoTo(a.params.startFrom,!0),a.thumbsUpdate(),a.thumbsBindEvents(),a.call(a.params.galleryThumbs.onInit)}}}(jQuery),function(n){"use strict";var t={itemsFilter:{formSelector:".js-filter",tagsSelector:".js-tag",itemsSelector:".js-item",onFilter:null,onInit:null}};n.itemsFilterMixin={getFilterFormData:function(){return{}},getFilterTagsData:function(){return this.$tags.filter('[aria-pressed="true"]').data()||{}},getFilterData:function(){var e=this.getFilterFormData(),t=this.getFilterTagsData();return n.extend(!0,this.cleanObject(e),t)},itemsFilter:function(){return this.call(this.params.itemsFilter.onFilter,this.getFilterData()),this},bindItemsFilterEvents:function(){var a=this;return a.$form.depotForm({onChange:function(){a.itemsFilter()},onInit:function(){var t=this;a.getFilterFormData=a.proxyCallback(a.getFilterFormData,function(e){return n.extend(!0,a.cleanObject(e),n.depotParse(t.getFormData()))})}}),a.on("click",a.params.itemsFilter.tagsSelector,function(e){e.preventDefault();e=n(this);a.$tags.aria("pressed","false").removeClass(a.params.activeClassName),e.aria("pressed","true").addClass(a.params.activeClassName),a.itemsFilter()}),a},initItemsFilter:function(){var e=this;e.getInitialState=e.proxyCallback(e.getInitialState,function(){return n.extend(!0,{},this,{itemsFilter:{}})}),e.params=n.extend(!0,{},e.translate(t),e.params),e.getElements(e.params.itemsFilter),e.state=e.getInitialState(),e.bindItemsFilterEvents(),e.call(e.params.itemsFilter.onInit)}}}(jQuery),function(a){"use strict";a.fn.aria=function(e,t){return arguments.length&&1<arguments.length?this.each(function(){a.attr(this,"aria-"+e,t)}):a.attr(this.get(0),"aria-"+e)},a.fn.removeAria=function(e){return this.each(function(){a.removeAttr(this,"aria-"+e)})}}(jQuery),function(r){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=r.extend(!0,{},r.depotProto,{pluginName:"model",defaults:{pointsSelector:".js-model-point",bubblesSelector:".js-model-bubble"},getInitialState:function(){return this.cleanObject({})},bindEvents:function(){var t=this;return t.on("click",function(e){r(e.target).closest(t.params.pointsSelector).length||r(e.target).closest(t.params.bubblesSelector).length||t.$bubbles.prop("hidden",!0)}),t.on("click",t.params.pointsSelector,function(e){e.preventDefault();var n=r(this).data("id").toString();t.$bubbles.each(function(e,t){var t=r(t),a=t.data("id").toString();t.prop("hidden",n!==a)})}),t},init:function(e){return this}}),r.fn.model=function(a){return this.each(function(e,t){r.data(this,"model",new n(t,a))})}}(jQuery),function(n){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=n.extend(!0,{},n.depotProto,{pluginName:"scrollCarousel",defaults:{viewportSelector:".js-carousel-viewport",overflowSelector:".js-carousel-overflow",itemsSelector:".js-carousel-item",buttonsSelector:".js-carousel-buttons",buttonBackwardsSelector:".js-carousel-backwards",buttonForwardsSelector:".js-carousel-forwards",bulletsSelector:".js-carousel-bullets",className:"carousel",activeClassName:"is-active",snapClassName:"is-snap",verticalClassName:"is-vertical",horizontalClassName:"is-horizontal",direction:"HORIZONTAL",duration:400,step:1,stepSize:0,itemMargin:!0,buttons:{enabled:!1,template:'<div class="${className}__buttons ${buttonsSelector|substr(1)}">${buttons.backwardsTemplate}${buttons.forwardsTemplate}</div>',backwardsTemplate:'<button class="${className}__button ${className}__button_backwards ${buttonBackwardsSelector|substr(1)}" type="button" aria-label="_{buttons.backwards}" title="_{buttons.backwards}"></button>',forwardsTemplate:'<button class="${className}__button ${className}__button_forwards ${buttonForwardsSelector|substr(1)}" type="button" aria-label="_{buttons.forwards}" title="_{buttons.forwards}"></button>'},bullets:{enabled:!1,template:'<div class="${className}__bullets">#{for item in items}${bullets.bulletTemplate}#{endfor}</div>',bulletTemplate:'<button class="${className}__bullet#{if item.isActive} ${activeClassName}#{endif} ${bulletsSelector|substr(1)}" type="button" aria-label="${item.index}" title="${item.index}"></button>'},dictionary:{buttons:{backwards:{ru:"Назад",en:"Backwards"},forwards:{ru:"Вперед",en:"Forwards"}}},mediaQueries:null},getInitialState:function(){var t=this,e=t.matchMedia(t.params.mediaQueries,function(e){t.state.direction=e&&e.direction||t.params.direction});return{direction:e&&e.direction||t.params.direction,currentIndex:0}},render:function(){var e,a=this;return a.params.bullets&&a.params.bullets.enabled&&(e=n.extend(!0,{},a.params,{items:function(){return new Array(a.$items.length/a.params.step).map(function(e,t){return{index:t,isActive:t===a.state.currentIndex}})}}),e=a.format(a.params.bullets.template,e),a.$viewport.append(e)),a.params.buttons&&a.params.buttons.enabled&&(e=n.extend(!0,{},a.params),e=a.format(a.params.buttons.template,e),a.$viewport.append(e)),a.getElements(),a.update()},getStepSize:function(){var e=this,t=e.params.stepSize;return t||("HORIZONTAL"===e.state.direction?t=e.$items.first().outerWidth(e.params.itemMargin):"VERTICAL"===e.state.direction&&(t=e.$items.first().outerHeight(e.params.itemMargin)),t*=e.params.step),Math.round(t)},update:function(e){var t,a,n,r,i=this;return"HORIZONTAL"===i.state.direction?i.$container.removeClass(i.params.verticalClassName).addClass(i.params.horizontalClassName):"VERTICAL"===i.state.direction&&i.$container.removeClass(i.params.horizontalClassName).addClass(i.params.verticalClassName),void 0===e&&("HORIZONTAL"===i.state.direction?e=i.$overflow.scrollLeft():"VERTICAL"===i.state.direction&&(e=i.$overflow.scrollTop())),i.state.currentIndex=Math.round(e/i.getStepSize()),i.params.buttons&&i.params.buttons.enabled&&(t=e<=(a=0),"HORIZONTAL"===i.state.direction?n=(n=(a=i.$overflow.get(0).scrollWidth)<=(r=Math.round(i.$overflow.outerWidth(!0))))||a<=e+r:"VERTICAL"===i.state.direction&&(n=(n=(a=i.$overflow.get(0).scrollHeight)<(r=Math.round(i.$overflow.outerHeight(!0))))||a<=e+r),i.$buttonBackwards.prop("disabled",t),i.$buttonForwards.prop("disabled",n),i.$buttons.prop("hidden",t&&n)),i.params.bullets&&i.params.bullets.enabled&&i.$bullets.removeClass(i.params.activeClassName).eq(i.state.currentIndex).addClass(i.params.activeClassName),i},scrollTo:function(e,t){var a=this,n=a.cleanObject();return e=e||0,"HORIZONTAL"===a.state.direction?n={scrollLeft:e}:"VERTICAL"===a.state.direction&&(n={scrollTop:e}),a.update(e),a.$overflow.removeClass(a.params.snapClassName).stop().animate(n,t?0:a.params.duration),a},scrollNext:function(){var e=this,t=0,a=e.getStepSize();return"HORIZONTAL"===e.state.direction?t=e.$overflow.scrollLeft()/a:"VERTICAL"===e.state.direction&&(t=e.$overflow.scrollTop()/a),e.scrollTo((Math.floor(t)+1)*a),e},scrollPrev:function(){var e=this,t=0,a=e.getStepSize();return"HORIZONTAL"===e.state.direction?t=e.$overflow.scrollLeft()/a:"VERTICAL"===e.state.direction&&(t=e.$overflow.scrollTop()/a),e.scrollTo((Math.ceil(t)-1)*a),e},bindEvents:function(){var t=this;return t.bind("wheel mousewheel domMouseScroll touchmove pointermove",t.$DOCUMENT,t.params.overflowSelector,function(e){n(e.target).closest(t.$container.get(0)).length&&t.throttle("scroll",function(){"pointermove"===e.type&&"mouse"===e.pointerType||(t.$overflow.addClass(t.params.snapClassName),t.$overflow.stop(),t.update())})}),t.on("update",function(){t.getElements(),t.scrollTo(t.getStepSize()*t.state.currentIndex,!0),t.update()}),t.bind("resize update",t.$WINDOW,function(){t.scrollTo(t.getStepSize()*t.state.currentIndex,!0),t.update()}),t.on("click",t.params.buttonBackwardsSelector,function(e){e.preventDefault(),t.scrollPrev()}),t.on("click",t.params.buttonForwardsSelector,function(e){e.preventDefault(),t.scrollNext()}),t.on("click",t.params.bulletsSelector,function(e){e.preventDefault();e=n(this).index();t.scrollTo(t.getStepSize()*e)}),t},init:function(){return this.render()}}),n.fn.scrollCarousel=function(a){return this.each(function(e,t){n.data(this,"scrollCarousel",new r(t,a))})}}(jQuery),function(o){"use strict";o(function(){o.depotProto.$WINDOW.on("resize init:vh",function(){document.documentElement.style.setProperty("--vh",.01*window.innerHeight+"px"),document.documentElement.style.setProperty("--vw",.01*window.innerWidth+"px"),o(".js-layout").css({minHeight:window.innerHeight-o(".js-header").outerHeight()})}).trigger("init:vh"),o.depotHash.whenMatched(/^dd:debug$/,function(){o.depotProto.error({type:"NotAnError",action:"DEBUG",message:"Отчёт о системе отправлен"},!0),o.depotNotifications.log({ru:"Отчёт о системе отправлен разработчикам.",en:"System report sent to developers."})},!0),o.depotProto.delay(function(){var e,t;"serviceWorker"in navigator&&null!==navigator.serviceWorker&&(e=Modernizr&&!!Modernizr.webp,t=window.devicePixelRatio&&1<window.devicePixelRatio,navigator.serviceWorker.register("/service-worker.min.js?retina="+t+"&webp="+e)),o.depotProto.$WINDOW.on("online",function(){document.visibilityState&&"visible"===document.visibilityState&&(o.depotNotifications.info({ru:"Подключение к сети восстановлено.",en:"Network connection has been restored."}),o(".js-offline").length&&!location.pathname.match(/\/offline\//)&&window.location.reload())}),o.depotProto.$WINDOW.on("offline",function(){document.visibilityState&&"visible"===document.visibilityState&&o.depotNotifications.warn({ru:"Проверьте подключение к сети.",en:"Check your network connection."})})}),window.Modernizr&&!Modernizr.objectfit&&o.depotProto.addScripts({src:"vendor/objectFitImages.min.js",exports:"objectFitImages"},function(e){e||window.objectFitImages(null,{watchMQ:!0})}),o('[loading="lazy"]').depotLazy(),o.depotProto.$DOCUMENT.on("lazy:added",function(e,t){e=o(e.target),e=e.is('[loading="lazy"]')?e:e.find('[loading="lazy"]');e&&e.length&&e.depotLazy(t)}),o.depotProto.$BODY.on("click","[data-clickable]",function(e){var t,a,n,r,i=o(e.target),s=o(this).find("a").get(0);i.closest("a, button").length&&!i.is(s)||s&&(t=location.href.replace(location.hash,""),r=s.href.replace(s.hash,""),a=o.depotHash.get(s),n=e.ctrlKey||e.metaKey,void 0===a||r!==t||n?i.is(s)||(r=s.target,n&&(s.target="_blank"),s.click(),s.target=r):(e.preventDefault(),o.depotHash.add(a)))}),o(".js-form-footer").depotForm({ajax:!0,mixins:[o.formResponseMixin,o.formCSRFMixin],formResponse:{onSuccess:function(e){o.depotNotifications.info({ru:"Ваша подписка оформлена.",en:"Your subscription has been completed."})},onError:function(e){o.depotNotifications.warn({ru:"Возникла ошибка, попробуйте в другой раз",en:"An error occurred, please try another time"})}},beforeInit:function(){return this.initFormResponse(),this.initFormCSRF(),this}}),o(".js-popup-menu").depotPopup(),o(".js-popup-search").depotPopup(),o(".js-elevator").elevator({animationEnabled:!1,mediaQueries:{"(min-width: 740px)":{animationEnabled:!0}}}),o(".js-elevator-toggle").depotSticky({position:"bottom"}),o(".js-carousel-vertical").scrollCarousel({direction:"VERTICAL",buttons:{enabled:!0}}),o(".js-carousel-horizontal").scrollCarousel({direction:"HORIZONTAL",buttons:{enabled:!0}}),o(".js-carousel-viewing").scrollCarousel({direction:"HORIZONTAL",buttons:{enabled:!0},mediaQueries:{"(min-width: 740px)":{direction:"VERTICAL"}}}),o(".js-carousel-filtered").scrollCarousel({direction:"HORIZONTAL",buttons:{enabled:!0},mixins:[o.itemsFilterMixin],itemsFilter:{formSelector:".js-carousel-filter",tagsSelector:".js-carousel-tag",itemsSelector:".js-carousel-item",onFilter:function(a){this.$items.each(function(e,t){var t=o(t),n={},r=!1;o.each(t.data(),function(e,t){n[e]=t.split(/[, ]+/)}),o.each(a,function(a,e){return r=Array.isArray(e)?n[a]&&!e||e.reduce(function(e,t){return e||-1!==n[a].indexOf(t)},!1):n[a]&&!e||-1!==n[a].indexOf(e)}),t.prop("hidden",!r)})}},beforeInit:function(){this.initItemsFilter()}}),o(".js-feed-lazy").depotLoaderMore({targetSelector:".js-feed-list",itemsSelector:".js-feed-item",buttonSelector:".js-feed-button",onSuccess:function(e){return e&&(this.$target.append(e),o('[loading="lazy"]',this.$target).trigger("lazy:added")),this}}),o(".js-figure").depotFigure(),o(".js-gallery-default").depotGallery({mixins:[o.galleryNavigationMixin,o.galleryThumbsMixin],galleryNavigation:{buttonsEnabled:!0,bulletsEnabled:!1},galleryThumbs:{buttonsEnabled:!1,bulletsEnabled:!1,captionEnabled:!0,onPage:3},beforeInit:function(){this.initGalleryNavigation(),this.initGalleryThumbs()}}),o(".js-model").model(),o(".js-diafilm").diafilm({mixins:[o.fullscreenMixin],fullscreen:{requestFullscreenSelector:".js-diafilm-full",exitFullscreenSelector:".js-diafilm-exit"},beforeInit:function(){return this.initFullscreen(),this}}),o(".js-tabs-default").depotTabs({useHash:!0}),o(".js-form-field-file").formFieldFile(),o(".js-form-field-select").formFieldSelect({dropDown:{mediaQuery:"all"}}),o(".js-form-feedback").depotForm({ajax:!0,validators:{"is-file-quantity":{test:function(e,t,a){var n=e.getAttribute("class").match(/is-file-quantity:([^ ]+)/),n=n&&parseFloat(n[1])||0;return e.files.length<=n},messagePath:"errors.file.quantity"},"is-file-size":{test:function(e,t,a){for(var n=e.getAttribute("class").match(/is-file-size:([^ ]+)/),r=n&&parseFloat(n[1])||0,i=e.files,s=i.length,o=0,l=!0;o<s;o+=1)i.item(o).size>r&&(l=!1);return l},messagePath:"errors.file.size"}},dictionary:{errors:{file:{size:{ru:"Проверьте размер ${files.length|plural(файла, файлов)}",en:"Check the size of ${files.length|plural(file, files)}"},quantity:{ru:"Проверьте количество файлов",en:"Check the count of files"}}}},mixins:[o.formResponseMixin,o.formCSRFMixin],formResponse:{onSuccess:function(e){o.depotNotifications.info({ru:"Ваше письмо отправлено.",en:"Your letter has been sent."})},onError:function(e){o.depotNotifications.warn({ru:"Возникла ошибка, попробуйте в другой раз",en:"An error occurred, please try another time"})}},beforeInit:function(){return this.initFormResponse(),this.initFormCSRF(),this}}),o(".js-carousel-earth").scrollCarousel({direction:"HORIZONTAL",buttons:{enabled:!0}}),o(".js-earth").earth(),o(".js-sharing").depotSharing()})}(jQuery);